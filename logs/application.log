2026-02-04 18:39:37 [restartedMain] INFO  j.s.s.SistemadefacturacioneinventarioApplication - Starting SistemadefacturacioneinventarioApplication using Java 17.0.18 with PID 8054 (/home/josepino/Desktop/SistemaFacturaEInventario/sistemadefacturacioneinventario/target/classes started by josepino in /home/josepino/Desktop/SistemaFacturaEInventario/sistemadefacturacioneinventario)
2026-02-04 18:39:37 [restartedMain] DEBUG j.s.s.SistemadefacturacioneinventarioApplication - Running with Spring Boot v3.5.8, Spring v6.2.14
2026-02-04 18:39:37 [restartedMain] INFO  j.s.s.SistemadefacturacioneinventarioApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-04 18:39:37 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-02-04 18:39:37 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-02-04 18:39:38 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-04 18:39:38 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 56 ms. Found 14 JPA repository interfaces.
2026-02-04 18:39:38 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8090 (http)
2026-02-04 18:39:38 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-04 18:39:38 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-02-04 18:39:38 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-04 18:39:38 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1257 ms
2026-02-04 18:39:38 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-04 18:39:39 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.36.Final
2026-02-04 18:39:39 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-04 18:39:39 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-04 18:39:39 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-04 18:39:39 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@95afd5d
2026-02-04 18:39:39 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-04 18:39:39 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.45
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-04 18:39:40 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-04 18:39:40 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-04 18:39:40 [restartedMain] DEBUG o.h.s.internal.StatisticsInitiator - Statistics initialized [enabled=false]
2026-02-04 18:39:41 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-04 18:39:41 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - üîê Configurando BCryptPasswordEncoder para encriptaci√≥n de contrase√±as
2026-02-04 18:39:42 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2026-02-04 18:39:42 [restartedMain] INFO  j.s.s.config.WebConfig - ‚öôÔ∏è Configurando interceptores de Spring MVC
2026-02-04 18:39:42 [restartedMain] DEBUG j.s.s.config.WebConfig - Registrando CierreDiarioInterceptor
2026-02-04 18:39:42 [restartedMain] DEBUG j.s.s.config.WebConfig - CierreDiarioInterceptor configurado. Patrones incluidos: /**
2026-02-04 18:39:42 [restartedMain] DEBUG j.s.s.config.WebConfig - Patrones excluidos: /cierres/**, /login, /css/**, /js/**, /error
2026-02-04 18:39:42 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name usuarioServicio
2026-02-04 18:39:42 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - üõ°Ô∏è Configurando SecurityFilterChain para SUPERADMIN (Orden 1)
2026-02-04 18:39:42 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - ‚úÖ SecurityFilterChain SUPERADMIN configurado
2026-02-04 18:39:42 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure Or [Mvc [pattern='/superadmin/**']] with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-02-04 18:39:42 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - üõ°Ô∏è Configurando SecurityFilterChain - Iniciando configuraci√≥n de seguridad
2026-02-04 18:39:42 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - ‚úÖ SecurityFilterChain configurado exitosamente
2026-02-04 18:39:42 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - Configuraci√≥n de seguridad aplicada:
2026-02-04 18:39:42 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - P√°ginas p√∫blicas: /, /login, /acceso-denegado, /css/**, /js/**, /error
2026-02-04 18:39:42 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - Solo ADMIN: /compras/**, /proveedores/**
2026-02-04 18:39:42 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - ADMIN o DEV: /productos/**, /ingredientes/**, /recetas/**, /reportes/**, /cierres/**
2026-02-04 18:39:42 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - Login: /login, Logout: /logout
2026-02-04 18:39:42 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - P√°gina acceso denegado: /acceso-denegado
2026-02-04 18:39:42 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure Or [Mvc [pattern='/**']] with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, ConcurrentSessionFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-02-04 18:39:42 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-04 18:39:42 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8090 (http) with context path '/'
2026-02-04 18:39:42 [restartedMain] INFO  j.s.s.SistemadefacturacioneinventarioApplication - Started SistemadefacturacioneinventarioApplication in 5.77 seconds (process running for 6.205)
2026-02-04 18:39:42 [restartedMain] INFO  j.s.s.config.DataInitializer - üöÄ INICIANDO CARGA DE DATOS INICIALES DEL SISTEMA
2026-02-04 18:39:42 [restartedMain] DEBUG org.hibernate.SQL - select count(*) from empresa e1_0
2026-02-04 18:39:43 [restartedMain] DEBUG org.hibernate.SQL - select e1_0.id,e1_0.email_contacto,e1_0.estado,e1_0.fecha_creacion,e1_0.nombre,e1_0.plan,e1_0.subdominio,e1_0.telefono from empresa e1_0
2026-02-04 18:39:43 [restartedMain] INFO  j.s.s.config.DataInitializer - ‚úÖ Empresa existente encontrada: Sistema por Defecto (ID: 1)
2026-02-04 18:39:43 [restartedMain] DEBUG org.hibernate.SQL - select c1_0.id from cliente c1_0 left join empresa e1_0 on e1_0.id=c1_0.empresa_id where c1_0.nombre=? and e1_0.id=? limit ?
2026-02-04 18:39:43 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:VARCHAR) <- [Consumidor Final]
2026-02-04 18:39:43 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (2:BIGINT) <- [1]
2026-02-04 18:39:43 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (3:INTEGER) <- [1]
2026-02-04 18:39:43 [restartedMain] INFO  j.s.s.config.DataInitializer - ‚úÖ Cliente 'Consumidor Final' ya existe para empresa Sistema por Defecto
2026-02-04 18:39:43 [restartedMain] DEBUG org.hibernate.SQL - select count(u1_0.id) from usuario u1_0 left join empresa e1_0 on e1_0.id=u1_0.empresa_id where e1_0.id=?
2026-02-04 18:39:43 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:BIGINT) <- [1]
2026-02-04 18:39:43 [restartedMain] INFO  j.s.s.config.DataInitializer - ‚úÖ Ya existen 3 usuarios para empresa Sistema por Defecto. No se crean nuevos.
2026-02-04 18:39:43 [restartedMain] INFO  j.s.s.config.DataInitializer - üëë Verificando existencia de usuario SUPER_ADMIN
2026-02-04 18:39:43 [restartedMain] DEBUG org.hibernate.SQL - select u1_0.id from usuario u1_0 where u1_0.rol=? limit ?
2026-02-04 18:39:43 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:VARCHAR) <- [SUPER_ADMIN]
2026-02-04 18:39:43 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (2:INTEGER) <- [1]
2026-02-04 18:39:43 [restartedMain] INFO  j.s.s.config.DataInitializer - ‚úÖ Usuario SUPER_ADMIN ya existe en el sistema
2026-02-04 18:39:43 [restartedMain] INFO  j.s.s.config.DataInitializer - ‚úÖ CARGA DE DATOS INICIALES COMPLETADA EXITOSAMENTE
2026-02-04 18:39:43 [restartedMain] INFO  j.s.s.config.UsuarioInicial - üîß Iniciando carga de usuarios iniciales
2026-02-04 18:39:43 [restartedMain] DEBUG org.hibernate.SQL - select count(*) from empresa e1_0
2026-02-04 18:39:43 [restartedMain] DEBUG org.hibernate.SQL - select e1_0.id,e1_0.email_contacto,e1_0.estado,e1_0.fecha_creacion,e1_0.nombre,e1_0.plan,e1_0.subdominio,e1_0.telefono from empresa e1_0
2026-02-04 18:39:43 [restartedMain] DEBUG org.hibernate.SQL - select count(u1_0.id) from usuario u1_0 left join empresa e1_0 on e1_0.id=u1_0.empresa_id where e1_0.id=?
2026-02-04 18:39:43 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:BIGINT) <- [1]
2026-02-04 18:39:43 [restartedMain] DEBUG j.s.s.config.UsuarioInicial - Usuarios existentes en BD para empresa Sistema por Defecto: 3
2026-02-04 18:39:43 [restartedMain] INFO  j.s.s.config.UsuarioInicial - ‚úÖ Ya existen usuarios para empresa Sistema por Defecto. No se crean nuevos.
2026-02-04 18:40:23 [http-nio-8090-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-04 18:40:23 [http-nio-8090-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-04 18:40:23 [http-nio-8090-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2026-02-04 18:40:23 [http-nio-8090-exec-1] INFO  j.s.s.context.TenantFilter - üîç DEBUG TenantFilter - serverName: localhost, Host header: localhost:8090
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    host: localhost:8090
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    connection: keep-alive
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua: "Not(A:Brand";v="8", "Chromium";v="144", "Brave";v="144"
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-mobile: ?0
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-platform: "Linux"
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    upgrade-insecure-requests: 1
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    user-agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    sec-gpc: 1
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    accept-language: en-US,en;q=0.5
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    sec-fetch-site: none
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    sec-fetch-mode: navigate
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    sec-fetch-user: ?1
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    sec-fetch-dest: document
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    accept-encoding: gzip, deflate, br, zstd
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    cookie: splunkweb_csrf_token_8000=5384569829649283902
2026-02-04 18:40:23 [http-nio-8090-exec-1] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Despu√©s de validar dominio principal
2026-02-04 18:40:23 [http-nio-8090-exec-1] INFO  j.s.s.context.TenantFilter - üîç DEBUG - serverName: 'localhost', requestURI: '/'
2026-02-04 18:40:23 [http-nio-8090-exec-1] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Punto CR√çTICO 1 - serverName: 'localhost', URI: '/'
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter - üìå TenantFilter - RUTA: /, M√©todo: GET
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter - üåê Server Name: localhost
2026-02-04 18:40:23 [http-nio-8090-exec-1] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio INICIO - serverName: 'localhost'
2026-02-04 18:40:23 [http-nio-8090-exec-1] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ¬øendsWith '.mibombay.com'? false
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter - üè† Es localhost
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter - üîç Subdominio extra√≠do: localhost
2026-02-04 18:40:23 [http-nio-8090-exec-1] INFO  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio: 'localhost'
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG org.hibernate.SQL - select e1_0.id,e1_0.email_contacto,e1_0.estado,e1_0.fecha_creacion,e1_0.nombre,e1_0.plan,e1_0.subdominio,e1_0.telefono from empresa e1_0 where e1_0.subdominio=?
2026-02-04 18:40:23 [http-nio-8090-exec-1] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:VARCHAR) <- [localhost]
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1593761922 wrapping com.mysql.cj.jdbc.ConnectionImpl@95afd5d] read-only
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG org.hibernate.SQL - select e1_0.id,e1_0.email_contacto,e1_0.estado,e1_0.fecha_creacion,e1_0.nombre,e1_0.plan,e1_0.subdominio,e1_0.telefono from empresa e1_0 where e1_0.id=?
2026-02-04 18:40:23 [http-nio-8090-exec-1] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:BIGINT) <- [1]
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1593761922 wrapping com.mysql.cj.jdbc.ConnectionImpl@95afd5d]
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantContext - üîß TenantContext.setCurrentTenant(1) - Hilo: 42
2026-02-04 18:40:23 [http-nio-8090-exec-1] INFO  j.s.s.context.TenantFilter - ‚ö†Ô∏è Usando empresa por defecto (localhost): 1 - Sistema por Defecto
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG j.s.s.config.CierreDiarioInterceptor - üõ°Ô∏è Interceptor ejecutando - Ruta: /, Empresa ID: 1
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG j.s.s.config.CierreDiarioInterceptor - üîì Ruta P√öBLICA excluida del interceptor: /
2026-02-04 18:40:23 [http-nio-8090-exec-1] INFO  j.s.s.controladores.InicioController - üè† GET / - Mostrando landing page p√∫blica
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantContext - üßπ TenantContext.clear() - Hilo: 42, Tenant anterior: 1
2026-02-04 18:40:23 [http-nio-8090-exec-1] DEBUG j.s.s.c.TenantContextCleanupFilter - ‚úÖ TenantContext limpiado - Hilo: 42, Request: /, Empresa ID anterior: 1
2026-02-04 18:40:23 [http-nio-8090-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2026-02-04 18:40:23 [http-nio-8090-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-02-04 18:40:23 [http-nio-8090-exec-2] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to http://localhost:8090/login
2026-02-04 18:40:23 [http-nio-8090-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2026-02-04 18:40:23 [http-nio-8090-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-02-04 18:40:23 [http-nio-8090-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2026-02-04 18:40:23 [http-nio-8090-exec-3] INFO  j.s.s.context.TenantFilter - üîç DEBUG TenantFilter - serverName: localhost, Host header: localhost:8090
2026-02-04 18:40:23 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    host: localhost:8090
2026-02-04 18:40:23 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    connection: keep-alive
2026-02-04 18:40:23 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-platform: "Linux"
2026-02-04 18:40:23 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    user-agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-04 18:40:23 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua: "Not(A:Brand";v="8", "Chromium";v="144", "Brave";v="144"
2026-02-04 18:40:23 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-mobile: ?0
2026-02-04 18:40:23 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    accept: image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8
2026-02-04 18:40:23 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    sec-gpc: 1
2026-02-04 18:40:23 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    accept-language: en-US,en;q=0.5
2026-02-04 18:40:23 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    sec-fetch-site: same-origin
2026-02-04 18:40:23 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    sec-fetch-mode: no-cors
2026-02-04 18:40:23 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    sec-fetch-dest: image
2026-02-04 18:40:23 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    referer: http://localhost:8090/
2026-02-04 18:40:23 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    accept-encoding: gzip, deflate, br, zstd
2026-02-04 18:40:23 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    cookie: splunkweb_csrf_token_8000=5384569829649283902; TENANT_SESSION=0DFF800432DFFBE1999F20D88DDC64A7
2026-02-04 18:40:23 [http-nio-8090-exec-3] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Despu√©s de validar dominio principal
2026-02-04 18:40:23 [http-nio-8090-exec-3] INFO  j.s.s.context.TenantFilter - üîç DEBUG - serverName: 'localhost', requestURI: '/login'
2026-02-04 18:40:23 [http-nio-8090-exec-3] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Punto CR√çTICO 1 - serverName: 'localhost', URI: '/login'
2026-02-04 18:40:23 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter - üìå TenantFilter - RUTA: /login, M√©todo: GET
2026-02-04 18:40:23 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter - üåê Server Name: localhost
2026-02-04 18:40:23 [http-nio-8090-exec-3] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio INICIO - serverName: 'localhost'
2026-02-04 18:40:23 [http-nio-8090-exec-3] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ¬øendsWith '.mibombay.com'? false
2026-02-04 18:40:23 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter - üè† Es localhost
2026-02-04 18:40:23 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter - üîç Subdominio extra√≠do: localhost
2026-02-04 18:40:23 [http-nio-8090-exec-3] INFO  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio: 'localhost'
2026-02-04 18:40:23 [http-nio-8090-exec-3] DEBUG org.hibernate.SQL - select e1_0.id,e1_0.email_contacto,e1_0.estado,e1_0.fecha_creacion,e1_0.nombre,e1_0.plan,e1_0.subdominio,e1_0.telefono from empresa e1_0 where e1_0.subdominio=?
2026-02-04 18:40:23 [http-nio-8090-exec-3] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:VARCHAR) <- [localhost]
2026-02-04 18:40:23 [http-nio-8090-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1002786806 wrapping com.mysql.cj.jdbc.ConnectionImpl@95afd5d] read-only
2026-02-04 18:40:23 [http-nio-8090-exec-3] DEBUG org.hibernate.SQL - select e1_0.id,e1_0.email_contacto,e1_0.estado,e1_0.fecha_creacion,e1_0.nombre,e1_0.plan,e1_0.subdominio,e1_0.telefono from empresa e1_0 where e1_0.id=?
2026-02-04 18:40:23 [http-nio-8090-exec-3] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:BIGINT) <- [1]
2026-02-04 18:40:23 [http-nio-8090-exec-3] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1002786806 wrapping com.mysql.cj.jdbc.ConnectionImpl@95afd5d]
2026-02-04 18:40:23 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantContext - üîß TenantContext.setCurrentTenant(1) - Hilo: 44
2026-02-04 18:40:23 [http-nio-8090-exec-3] INFO  j.s.s.context.TenantFilter - ‚ö†Ô∏è Usando empresa por defecto (localhost): 1 - Sistema por Defecto
2026-02-04 18:40:23 [http-nio-8090-exec-3] WARN  j.s.s.controladores.InicioController - ‚ùå Intento de acceso a /login desde dominio principal
2026-02-04 18:40:23 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantContext - üßπ TenantContext.clear() - Hilo: 44, Tenant anterior: 1
2026-02-04 18:40:23 [http-nio-8090-exec-3] DEBUG j.s.s.c.TenantContextCleanupFilter - ‚úÖ TenantContext limpiado - Hilo: 44, Request: /login, Empresa ID anterior: 1
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2026-02-04 18:40:23 [http-nio-8090-exec-4] INFO  j.s.s.context.TenantFilter - üîç DEBUG TenantFilter - serverName: localhost, Host header: localhost:8090
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    host: localhost:8090
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    connection: keep-alive
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-platform: "Linux"
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    user-agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua: "Not(A:Brand";v="8", "Chromium";v="144", "Brave";v="144"
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-mobile: ?0
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    accept: image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    sec-gpc: 1
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    accept-language: en-US,en;q=0.5
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    sec-fetch-site: same-origin
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    sec-fetch-mode: no-cors
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    sec-fetch-dest: image
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    referer: http://localhost:8090/
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    accept-encoding: gzip, deflate, br, zstd
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    cookie: splunkweb_csrf_token_8000=5384569829649283902; TENANT_SESSION=0DFF800432DFFBE1999F20D88DDC64A7
2026-02-04 18:40:23 [http-nio-8090-exec-4] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Despu√©s de validar dominio principal
2026-02-04 18:40:23 [http-nio-8090-exec-4] INFO  j.s.s.context.TenantFilter - üîç DEBUG - serverName: 'localhost', requestURI: '/'
2026-02-04 18:40:23 [http-nio-8090-exec-4] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Punto CR√çTICO 1 - serverName: 'localhost', URI: '/'
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter - üìå TenantFilter - RUTA: /, M√©todo: GET
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter - üåê Server Name: localhost
2026-02-04 18:40:23 [http-nio-8090-exec-4] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio INICIO - serverName: 'localhost'
2026-02-04 18:40:23 [http-nio-8090-exec-4] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ¬øendsWith '.mibombay.com'? false
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter - üè† Es localhost
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter - üîç Subdominio extra√≠do: localhost
2026-02-04 18:40:23 [http-nio-8090-exec-4] INFO  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio: 'localhost'
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG org.hibernate.SQL - select e1_0.id,e1_0.email_contacto,e1_0.estado,e1_0.fecha_creacion,e1_0.nombre,e1_0.plan,e1_0.subdominio,e1_0.telefono from empresa e1_0 where e1_0.subdominio=?
2026-02-04 18:40:23 [http-nio-8090-exec-4] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:VARCHAR) <- [localhost]
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@2078992714 wrapping com.mysql.cj.jdbc.ConnectionImpl@95afd5d] read-only
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG org.hibernate.SQL - select e1_0.id,e1_0.email_contacto,e1_0.estado,e1_0.fecha_creacion,e1_0.nombre,e1_0.plan,e1_0.subdominio,e1_0.telefono from empresa e1_0 where e1_0.id=?
2026-02-04 18:40:23 [http-nio-8090-exec-4] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:BIGINT) <- [1]
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@2078992714 wrapping com.mysql.cj.jdbc.ConnectionImpl@95afd5d]
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantContext - üîß TenantContext.setCurrentTenant(1) - Hilo: 45
2026-02-04 18:40:23 [http-nio-8090-exec-4] INFO  j.s.s.context.TenantFilter - ‚ö†Ô∏è Usando empresa por defecto (localhost): 1 - Sistema por Defecto
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG j.s.s.config.CierreDiarioInterceptor - üõ°Ô∏è Interceptor ejecutando - Ruta: /, Empresa ID: 1
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG j.s.s.config.CierreDiarioInterceptor - üîì Ruta P√öBLICA excluida del interceptor: /
2026-02-04 18:40:23 [http-nio-8090-exec-4] INFO  j.s.s.controladores.InicioController - üè† GET / - Mostrando landing page p√∫blica
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantContext - üßπ TenantContext.clear() - Hilo: 45, Tenant anterior: 1
2026-02-04 18:40:23 [http-nio-8090-exec-4] DEBUG j.s.s.c.TenantContextCleanupFilter - ‚úÖ TenantContext limpiado - Hilo: 45, Request: /, Empresa ID anterior: 1
2026-02-04 18:40:32 [http-nio-8090-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2026-02-04 18:40:32 [http-nio-8090-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-02-04 18:40:32 [http-nio-8090-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2026-02-04 18:40:32 [http-nio-8090-exec-5] INFO  j.s.s.context.TenantFilter - üîç DEBUG TenantFilter - serverName: defecto.localhost, Host header: defecto.localhost:8090
2026-02-04 18:40:32 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    host: defecto.localhost:8090
2026-02-04 18:40:32 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    connection: keep-alive
2026-02-04 18:40:32 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua: "Not(A:Brand";v="8", "Chromium";v="144", "Brave";v="144"
2026-02-04 18:40:32 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-mobile: ?0
2026-02-04 18:40:32 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-platform: "Linux"
2026-02-04 18:40:32 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    upgrade-insecure-requests: 1
2026-02-04 18:40:32 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    user-agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-04 18:40:32 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8
2026-02-04 18:40:32 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    sec-gpc: 1
2026-02-04 18:40:32 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    accept-language: en-US,en;q=0.8
2026-02-04 18:40:32 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    sec-fetch-site: none
2026-02-04 18:40:32 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    sec-fetch-mode: navigate
2026-02-04 18:40:32 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    sec-fetch-user: ?1
2026-02-04 18:40:32 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    sec-fetch-dest: document
2026-02-04 18:40:32 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    accept-encoding: gzip, deflate, br, zstd
2026-02-04 18:40:32 [http-nio-8090-exec-5] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Despu√©s de validar dominio principal
2026-02-04 18:40:32 [http-nio-8090-exec-5] INFO  j.s.s.context.TenantFilter - üîç DEBUG - serverName: 'defecto.localhost', requestURI: '/'
2026-02-04 18:40:32 [http-nio-8090-exec-5] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Punto CR√çTICO 1 - serverName: 'defecto.localhost', URI: '/'
2026-02-04 18:40:32 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter - üìå TenantFilter - RUTA: /, M√©todo: GET
2026-02-04 18:40:32 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter - üåê Server Name: defecto.localhost
2026-02-04 18:40:32 [http-nio-8090-exec-5] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio INICIO - serverName: 'defecto.localhost'
2026-02-04 18:40:32 [http-nio-8090-exec-5] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ¬øendsWith '.mibombay.com'? false
2026-02-04 18:40:32 [http-nio-8090-exec-5] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ‚ùå NO termina con .mibombay.com
2026-02-04 18:40:32 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter - üîç Subdominio extra√≠do: null
2026-02-04 18:40:32 [http-nio-8090-exec-5] INFO  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio: 'null'
2026-02-04 18:40:32 [http-nio-8090-exec-5] WARN  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio es NULL! serverName: 'defecto.localhost'
2026-02-04 18:40:32 [http-nio-8090-exec-5] WARN  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - ¬øserverName.endsWith('.mibombay.com')? false
2026-02-04 18:40:32 [http-nio-8090-exec-5] DEBUG j.s.s.config.CierreDiarioInterceptor - üõ°Ô∏è Interceptor ejecutando - Ruta: /, Empresa ID: null
2026-02-04 18:40:32 [http-nio-8090-exec-5] DEBUG j.s.s.config.CierreDiarioInterceptor - üîì Acceso p√∫blico sin empresa - Permitir: /
2026-02-04 18:40:32 [http-nio-8090-exec-5] INFO  j.s.s.controladores.InicioController - üè† GET / - Mostrando landing page p√∫blica
2026-02-04 18:40:32 [http-nio-8090-exec-5] DEBUG j.s.s.c.TenantContextCleanupFilter - ‚úÖ TenantContext limpiado - Hilo: 46, Request: /, Empresa ID anterior: null
2026-02-04 18:40:32 [http-nio-8090-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2026-02-04 18:40:32 [http-nio-8090-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-02-04 18:40:32 [http-nio-8090-exec-6] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to http://defecto.localhost:8090/login
2026-02-04 18:40:32 [http-nio-8090-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2026-02-04 18:40:32 [http-nio-8090-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-02-04 18:40:32 [http-nio-8090-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2026-02-04 18:40:32 [http-nio-8090-exec-7] INFO  j.s.s.context.TenantFilter - üîç DEBUG TenantFilter - serverName: defecto.localhost, Host header: defecto.localhost:8090
2026-02-04 18:40:32 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    host: defecto.localhost:8090
2026-02-04 18:40:32 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    connection: keep-alive
2026-02-04 18:40:32 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-platform: "Linux"
2026-02-04 18:40:32 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    user-agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-04 18:40:32 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua: "Not(A:Brand";v="8", "Chromium";v="144", "Brave";v="144"
2026-02-04 18:40:32 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-mobile: ?0
2026-02-04 18:40:32 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    accept: image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8
2026-02-04 18:40:32 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    sec-gpc: 1
2026-02-04 18:40:32 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    accept-language: en-US,en;q=0.8
2026-02-04 18:40:32 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    sec-fetch-site: same-origin
2026-02-04 18:40:32 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    sec-fetch-mode: no-cors
2026-02-04 18:40:32 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    sec-fetch-dest: image
2026-02-04 18:40:32 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    referer: http://defecto.localhost:8090/
2026-02-04 18:40:32 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    accept-encoding: gzip, deflate, br, zstd
2026-02-04 18:40:32 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    cookie: TENANT_SESSION=5B8FECF5C4A52A6C0C474E7F7253ACFD
2026-02-04 18:40:32 [http-nio-8090-exec-7] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Despu√©s de validar dominio principal
2026-02-04 18:40:32 [http-nio-8090-exec-7] INFO  j.s.s.context.TenantFilter - üîç DEBUG - serverName: 'defecto.localhost', requestURI: '/login'
2026-02-04 18:40:32 [http-nio-8090-exec-7] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Punto CR√çTICO 1 - serverName: 'defecto.localhost', URI: '/login'
2026-02-04 18:40:32 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter - üìå TenantFilter - RUTA: /login, M√©todo: GET
2026-02-04 18:40:32 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter - üåê Server Name: defecto.localhost
2026-02-04 18:40:32 [http-nio-8090-exec-7] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio INICIO - serverName: 'defecto.localhost'
2026-02-04 18:40:32 [http-nio-8090-exec-7] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ¬øendsWith '.mibombay.com'? false
2026-02-04 18:40:32 [http-nio-8090-exec-7] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ‚ùå NO termina con .mibombay.com
2026-02-04 18:40:32 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter - üîç Subdominio extra√≠do: null
2026-02-04 18:40:32 [http-nio-8090-exec-7] INFO  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio: 'null'
2026-02-04 18:40:32 [http-nio-8090-exec-7] WARN  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio es NULL! serverName: 'defecto.localhost'
2026-02-04 18:40:32 [http-nio-8090-exec-7] WARN  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - ¬øserverName.endsWith('.mibombay.com')? false
2026-02-04 18:40:32 [http-nio-8090-exec-7] INFO  j.s.s.controladores.InicioController - üîê GET /login - Subdominio: defecto.localhost
2026-02-04 18:40:32 [http-nio-8090-exec-7] DEBUG j.s.s.c.TenantContextCleanupFilter - ‚úÖ TenantContext limpiado - Hilo: 48, Request: /login, Empresa ID anterior: null
2026-02-04 18:40:39 [http-nio-8090-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2026-02-04 18:40:39 [http-nio-8090-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-02-04 18:40:39 [http-nio-8090-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2026-02-04 18:40:39 [http-nio-8090-exec-8] INFO  j.s.s.context.TenantFilter - üîç DEBUG TenantFilter - serverName: defecto.localhost, Host header: defecto.localhost:8090
2026-02-04 18:40:39 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    host: defecto.localhost:8090
2026-02-04 18:40:39 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    connection: keep-alive
2026-02-04 18:40:39 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua: "Not(A:Brand";v="8", "Chromium";v="144", "Brave";v="144"
2026-02-04 18:40:39 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-mobile: ?0
2026-02-04 18:40:39 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-platform: "Linux"
2026-02-04 18:40:39 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    upgrade-insecure-requests: 1
2026-02-04 18:40:39 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    user-agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-04 18:40:39 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8
2026-02-04 18:40:39 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    sec-gpc: 1
2026-02-04 18:40:39 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    accept-language: en-US,en;q=0.8
2026-02-04 18:40:39 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    sec-fetch-site: none
2026-02-04 18:40:39 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    sec-fetch-mode: navigate
2026-02-04 18:40:39 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    sec-fetch-user: ?1
2026-02-04 18:40:39 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    sec-fetch-dest: document
2026-02-04 18:40:39 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    accept-encoding: gzip, deflate, br, zstd
2026-02-04 18:40:39 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    cookie: TENANT_SESSION=5B8FECF5C4A52A6C0C474E7F7253ACFD
2026-02-04 18:40:39 [http-nio-8090-exec-8] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Despu√©s de validar dominio principal
2026-02-04 18:40:39 [http-nio-8090-exec-8] INFO  j.s.s.context.TenantFilter - üîç DEBUG - serverName: 'defecto.localhost', requestURI: '/login'
2026-02-04 18:40:39 [http-nio-8090-exec-8] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Punto CR√çTICO 1 - serverName: 'defecto.localhost', URI: '/login'
2026-02-04 18:40:39 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter - üìå TenantFilter - RUTA: /login, M√©todo: GET
2026-02-04 18:40:39 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter - üåê Server Name: defecto.localhost
2026-02-04 18:40:39 [http-nio-8090-exec-8] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio INICIO - serverName: 'defecto.localhost'
2026-02-04 18:40:39 [http-nio-8090-exec-8] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ¬øendsWith '.mibombay.com'? false
2026-02-04 18:40:39 [http-nio-8090-exec-8] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ‚ùå NO termina con .mibombay.com
2026-02-04 18:40:39 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter - üîç Subdominio extra√≠do: null
2026-02-04 18:40:39 [http-nio-8090-exec-8] INFO  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio: 'null'
2026-02-04 18:40:39 [http-nio-8090-exec-8] WARN  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio es NULL! serverName: 'defecto.localhost'
2026-02-04 18:40:39 [http-nio-8090-exec-8] WARN  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - ¬øserverName.endsWith('.mibombay.com')? false
2026-02-04 18:40:39 [http-nio-8090-exec-8] INFO  j.s.s.controladores.InicioController - üîê GET /login - Subdominio: defecto.localhost
2026-02-04 18:40:39 [http-nio-8090-exec-8] DEBUG j.s.s.c.TenantContextCleanupFilter - ‚úÖ TenantContext limpiado - Hilo: 49, Request: /login, Empresa ID anterior: null
2026-02-04 18:40:40 [http-nio-8090-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2026-02-04 18:40:40 [http-nio-8090-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-02-04 18:40:40 [http-nio-8090-exec-9] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to http://defecto.localhost:8090/login
2026-02-04 18:40:40 [http-nio-8090-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2026-02-04 18:40:40 [http-nio-8090-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-02-04 18:40:40 [http-nio-8090-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2026-02-04 18:40:40 [http-nio-8090-exec-10] INFO  j.s.s.context.TenantFilter - üîç DEBUG TenantFilter - serverName: defecto.localhost, Host header: defecto.localhost:8090
2026-02-04 18:40:40 [http-nio-8090-exec-10] DEBUG j.s.s.context.TenantFilter -    host: defecto.localhost:8090
2026-02-04 18:40:40 [http-nio-8090-exec-10] DEBUG j.s.s.context.TenantFilter -    connection: keep-alive
2026-02-04 18:40:40 [http-nio-8090-exec-10] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-platform: "Linux"
2026-02-04 18:40:40 [http-nio-8090-exec-10] DEBUG j.s.s.context.TenantFilter -    user-agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-04 18:40:40 [http-nio-8090-exec-10] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua: "Not(A:Brand";v="8", "Chromium";v="144", "Brave";v="144"
2026-02-04 18:40:40 [http-nio-8090-exec-10] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-mobile: ?0
2026-02-04 18:40:40 [http-nio-8090-exec-10] DEBUG j.s.s.context.TenantFilter -    accept: image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8
2026-02-04 18:40:40 [http-nio-8090-exec-10] DEBUG j.s.s.context.TenantFilter -    sec-gpc: 1
2026-02-04 18:40:40 [http-nio-8090-exec-10] DEBUG j.s.s.context.TenantFilter -    accept-language: en-US,en;q=0.8
2026-02-04 18:40:40 [http-nio-8090-exec-10] DEBUG j.s.s.context.TenantFilter -    sec-fetch-site: same-origin
2026-02-04 18:40:40 [http-nio-8090-exec-10] DEBUG j.s.s.context.TenantFilter -    sec-fetch-mode: no-cors
2026-02-04 18:40:40 [http-nio-8090-exec-10] DEBUG j.s.s.context.TenantFilter -    sec-fetch-dest: image
2026-02-04 18:40:40 [http-nio-8090-exec-10] DEBUG j.s.s.context.TenantFilter -    referer: http://defecto.localhost:8090/login
2026-02-04 18:40:40 [http-nio-8090-exec-10] DEBUG j.s.s.context.TenantFilter -    accept-encoding: gzip, deflate, br, zstd
2026-02-04 18:40:40 [http-nio-8090-exec-10] DEBUG j.s.s.context.TenantFilter -    cookie: TENANT_SESSION=5B8FECF5C4A52A6C0C474E7F7253ACFD
2026-02-04 18:40:40 [http-nio-8090-exec-10] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Despu√©s de validar dominio principal
2026-02-04 18:40:40 [http-nio-8090-exec-10] INFO  j.s.s.context.TenantFilter - üîç DEBUG - serverName: 'defecto.localhost', requestURI: '/login'
2026-02-04 18:40:40 [http-nio-8090-exec-10] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Punto CR√çTICO 1 - serverName: 'defecto.localhost', URI: '/login'
2026-02-04 18:40:40 [http-nio-8090-exec-10] DEBUG j.s.s.context.TenantFilter - üìå TenantFilter - RUTA: /login, M√©todo: GET
2026-02-04 18:40:40 [http-nio-8090-exec-10] DEBUG j.s.s.context.TenantFilter - üåê Server Name: defecto.localhost
2026-02-04 18:40:40 [http-nio-8090-exec-10] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio INICIO - serverName: 'defecto.localhost'
2026-02-04 18:40:40 [http-nio-8090-exec-10] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ¬øendsWith '.mibombay.com'? false
2026-02-04 18:40:40 [http-nio-8090-exec-10] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ‚ùå NO termina con .mibombay.com
2026-02-04 18:40:40 [http-nio-8090-exec-10] DEBUG j.s.s.context.TenantFilter - üîç Subdominio extra√≠do: null
2026-02-04 18:40:40 [http-nio-8090-exec-10] INFO  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio: 'null'
2026-02-04 18:40:40 [http-nio-8090-exec-10] WARN  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio es NULL! serverName: 'defecto.localhost'
2026-02-04 18:40:40 [http-nio-8090-exec-10] WARN  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - ¬øserverName.endsWith('.mibombay.com')? false
2026-02-04 18:40:40 [http-nio-8090-exec-10] INFO  j.s.s.controladores.InicioController - üîê GET /login - Subdominio: defecto.localhost
2026-02-04 18:40:40 [http-nio-8090-exec-10] DEBUG j.s.s.c.TenantContextCleanupFilter - ‚úÖ TenantContext limpiado - Hilo: 51, Request: /login, Empresa ID anterior: null
2026-02-04 18:40:47 [http-nio-8090-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2026-02-04 18:40:47 [http-nio-8090-exec-1] DEBUG j.s.s.servicios.UsuarioServicio - Autenticando usuario: admin para la empresa ID: null
2026-02-04 18:40:47 [http-nio-8090-exec-1] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio INICIO - serverName: 'defecto.localhost'
2026-02-04 18:40:47 [http-nio-8090-exec-1] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ¬øendsWith '.mibombay.com'? false
2026-02-04 18:40:47 [http-nio-8090-exec-1] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ‚ùå NO termina con .mibombay.com
2026-02-04 18:40:47 [http-nio-8090-exec-1] INFO  j.s.s.servicios.UsuarioServicio - üîê Login - Usuario: admin | Subdominio: null
2026-02-04 18:40:47 [http-nio-8090-exec-1] DEBUG org.hibernate.SQL - select e1_0.id,e1_0.email_contacto,e1_0.estado,e1_0.fecha_creacion,e1_0.nombre,e1_0.plan,e1_0.subdominio,e1_0.telefono from empresa e1_0 where e1_0.subdominio is null
2026-02-04 18:40:47 [http-nio-8090-exec-1] ERROR j.s.s.servicios.UsuarioServicio - Empresa no encontrada para subdominio: null
2026-02-04 18:40:47 [http-nio-8090-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'admin'
2026-02-04 18:40:47 [http-nio-8090-exec-1] DEBUG o.s.s.authentication.ProviderManager - Authentication failed with provider DaoAuthenticationProvider since Bad credentials
2026-02-04 18:40:47 [http-nio-8090-exec-1] DEBUG o.s.s.authentication.ProviderManager - Denying authentication since all attempted providers failed
2026-02-04 18:40:47 [http-nio-8090-exec-1] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2026-02-04 18:40:47 [http-nio-8090-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2026-02-04 18:40:47 [http-nio-8090-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-02-04 18:40:47 [http-nio-8090-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?error
2026-02-04 18:40:47 [http-nio-8090-exec-2] INFO  j.s.s.context.TenantFilter - üîç DEBUG TenantFilter - serverName: defecto.localhost, Host header: defecto.localhost:8090
2026-02-04 18:40:47 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    host: defecto.localhost:8090
2026-02-04 18:40:47 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    connection: keep-alive
2026-02-04 18:40:47 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    cache-control: max-age=0
2026-02-04 18:40:47 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    upgrade-insecure-requests: 1
2026-02-04 18:40:47 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    user-agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-04 18:40:47 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8
2026-02-04 18:40:47 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    sec-gpc: 1
2026-02-04 18:40:47 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    accept-language: en-US,en;q=0.8
2026-02-04 18:40:47 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    sec-fetch-site: same-origin
2026-02-04 18:40:47 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    sec-fetch-mode: navigate
2026-02-04 18:40:47 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    sec-fetch-user: ?1
2026-02-04 18:40:47 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    sec-fetch-dest: document
2026-02-04 18:40:47 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua: "Not(A:Brand";v="8", "Chromium";v="144", "Brave";v="144"
2026-02-04 18:40:47 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-mobile: ?0
2026-02-04 18:40:47 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-platform: "Linux"
2026-02-04 18:40:47 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    referer: http://defecto.localhost:8090/login
2026-02-04 18:40:47 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    accept-encoding: gzip, deflate, br, zstd
2026-02-04 18:40:47 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    cookie: TENANT_SESSION=5B8FECF5C4A52A6C0C474E7F7253ACFD
2026-02-04 18:40:47 [http-nio-8090-exec-2] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Despu√©s de validar dominio principal
2026-02-04 18:40:47 [http-nio-8090-exec-2] INFO  j.s.s.context.TenantFilter - üîç DEBUG - serverName: 'defecto.localhost', requestURI: '/login'
2026-02-04 18:40:47 [http-nio-8090-exec-2] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Punto CR√çTICO 1 - serverName: 'defecto.localhost', URI: '/login'
2026-02-04 18:40:47 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter - üìå TenantFilter - RUTA: /login, M√©todo: GET
2026-02-04 18:40:47 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter - üåê Server Name: defecto.localhost
2026-02-04 18:40:47 [http-nio-8090-exec-2] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio INICIO - serverName: 'defecto.localhost'
2026-02-04 18:40:47 [http-nio-8090-exec-2] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ¬øendsWith '.mibombay.com'? false
2026-02-04 18:40:47 [http-nio-8090-exec-2] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ‚ùå NO termina con .mibombay.com
2026-02-04 18:40:47 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter - üîç Subdominio extra√≠do: null
2026-02-04 18:40:47 [http-nio-8090-exec-2] INFO  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio: 'null'
2026-02-04 18:40:47 [http-nio-8090-exec-2] WARN  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio es NULL! serverName: 'defecto.localhost'
2026-02-04 18:40:47 [http-nio-8090-exec-2] WARN  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - ¬øserverName.endsWith('.mibombay.com')? false
2026-02-04 18:40:47 [http-nio-8090-exec-2] INFO  j.s.s.controladores.InicioController - üîê GET /login - Subdominio: defecto.localhost
2026-02-04 18:40:47 [http-nio-8090-exec-2] DEBUG j.s.s.c.TenantContextCleanupFilter - ‚úÖ TenantContext limpiado - Hilo: 43, Request: /login, Empresa ID anterior: null
2026-02-04 18:40:47 [http-nio-8090-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2026-02-04 18:40:47 [http-nio-8090-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-02-04 18:40:47 [http-nio-8090-exec-3] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to http://defecto.localhost:8090/login
2026-02-04 18:40:47 [http-nio-8090-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2026-02-04 18:40:47 [http-nio-8090-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-02-04 18:40:47 [http-nio-8090-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2026-02-04 18:40:47 [http-nio-8090-exec-4] INFO  j.s.s.context.TenantFilter - üîç DEBUG TenantFilter - serverName: defecto.localhost, Host header: defecto.localhost:8090
2026-02-04 18:40:47 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    host: defecto.localhost:8090
2026-02-04 18:40:47 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    connection: keep-alive
2026-02-04 18:40:47 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-platform: "Linux"
2026-02-04 18:40:47 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    user-agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-04 18:40:47 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua: "Not(A:Brand";v="8", "Chromium";v="144", "Brave";v="144"
2026-02-04 18:40:47 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-mobile: ?0
2026-02-04 18:40:47 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    accept: image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8
2026-02-04 18:40:47 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    sec-gpc: 1
2026-02-04 18:40:47 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    accept-language: en-US,en;q=0.8
2026-02-04 18:40:47 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    sec-fetch-site: same-origin
2026-02-04 18:40:47 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    sec-fetch-mode: no-cors
2026-02-04 18:40:47 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    sec-fetch-dest: image
2026-02-04 18:40:47 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    referer: http://defecto.localhost:8090/login?error
2026-02-04 18:40:47 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    accept-encoding: gzip, deflate, br, zstd
2026-02-04 18:40:47 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    cookie: TENANT_SESSION=5B8FECF5C4A52A6C0C474E7F7253ACFD
2026-02-04 18:40:47 [http-nio-8090-exec-4] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Despu√©s de validar dominio principal
2026-02-04 18:40:47 [http-nio-8090-exec-4] INFO  j.s.s.context.TenantFilter - üîç DEBUG - serverName: 'defecto.localhost', requestURI: '/login'
2026-02-04 18:40:47 [http-nio-8090-exec-4] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Punto CR√çTICO 1 - serverName: 'defecto.localhost', URI: '/login'
2026-02-04 18:40:47 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter - üìå TenantFilter - RUTA: /login, M√©todo: GET
2026-02-04 18:40:47 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter - üåê Server Name: defecto.localhost
2026-02-04 18:40:47 [http-nio-8090-exec-4] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio INICIO - serverName: 'defecto.localhost'
2026-02-04 18:40:47 [http-nio-8090-exec-4] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ¬øendsWith '.mibombay.com'? false
2026-02-04 18:40:47 [http-nio-8090-exec-4] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ‚ùå NO termina con .mibombay.com
2026-02-04 18:40:47 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter - üîç Subdominio extra√≠do: null
2026-02-04 18:40:47 [http-nio-8090-exec-4] INFO  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio: 'null'
2026-02-04 18:40:47 [http-nio-8090-exec-4] WARN  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio es NULL! serverName: 'defecto.localhost'
2026-02-04 18:40:47 [http-nio-8090-exec-4] WARN  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - ¬øserverName.endsWith('.mibombay.com')? false
2026-02-04 18:40:47 [http-nio-8090-exec-4] INFO  j.s.s.controladores.InicioController - üîê GET /login - Subdominio: defecto.localhost
2026-02-04 18:40:47 [http-nio-8090-exec-4] DEBUG j.s.s.c.TenantContextCleanupFilter - ‚úÖ TenantContext limpiado - Hilo: 45, Request: /login, Empresa ID anterior: null
2026-02-04 18:40:54 [http-nio-8090-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2026-02-04 18:40:54 [http-nio-8090-exec-5] DEBUG j.s.s.servicios.UsuarioServicio - Autenticando usuario: admin para la empresa ID: null
2026-02-04 18:40:54 [http-nio-8090-exec-5] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio INICIO - serverName: 'defecto.localhost'
2026-02-04 18:40:54 [http-nio-8090-exec-5] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ¬øendsWith '.mibombay.com'? false
2026-02-04 18:40:54 [http-nio-8090-exec-5] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ‚ùå NO termina con .mibombay.com
2026-02-04 18:40:54 [http-nio-8090-exec-5] INFO  j.s.s.servicios.UsuarioServicio - üîê Login - Usuario: admin | Subdominio: null
2026-02-04 18:40:54 [http-nio-8090-exec-5] DEBUG org.hibernate.SQL - select e1_0.id,e1_0.email_contacto,e1_0.estado,e1_0.fecha_creacion,e1_0.nombre,e1_0.plan,e1_0.subdominio,e1_0.telefono from empresa e1_0 where e1_0.subdominio is null
2026-02-04 18:40:54 [http-nio-8090-exec-5] ERROR j.s.s.servicios.UsuarioServicio - Empresa no encontrada para subdominio: null
2026-02-04 18:40:54 [http-nio-8090-exec-5] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'admin'
2026-02-04 18:40:54 [http-nio-8090-exec-5] DEBUG o.s.s.authentication.ProviderManager - Authentication failed with provider DaoAuthenticationProvider since Bad credentials
2026-02-04 18:40:54 [http-nio-8090-exec-5] DEBUG o.s.s.authentication.ProviderManager - Denying authentication since all attempted providers failed
2026-02-04 18:40:54 [http-nio-8090-exec-5] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2026-02-04 18:40:54 [http-nio-8090-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2026-02-04 18:40:54 [http-nio-8090-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-02-04 18:40:54 [http-nio-8090-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?error
2026-02-04 18:40:54 [http-nio-8090-exec-6] INFO  j.s.s.context.TenantFilter - üîç DEBUG TenantFilter - serverName: defecto.localhost, Host header: defecto.localhost:8090
2026-02-04 18:40:54 [http-nio-8090-exec-6] DEBUG j.s.s.context.TenantFilter -    host: defecto.localhost:8090
2026-02-04 18:40:54 [http-nio-8090-exec-6] DEBUG j.s.s.context.TenantFilter -    connection: keep-alive
2026-02-04 18:40:54 [http-nio-8090-exec-6] DEBUG j.s.s.context.TenantFilter -    cache-control: max-age=0
2026-02-04 18:40:54 [http-nio-8090-exec-6] DEBUG j.s.s.context.TenantFilter -    upgrade-insecure-requests: 1
2026-02-04 18:40:54 [http-nio-8090-exec-6] DEBUG j.s.s.context.TenantFilter -    user-agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-04 18:40:54 [http-nio-8090-exec-6] DEBUG j.s.s.context.TenantFilter -    accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8
2026-02-04 18:40:54 [http-nio-8090-exec-6] DEBUG j.s.s.context.TenantFilter -    sec-gpc: 1
2026-02-04 18:40:54 [http-nio-8090-exec-6] DEBUG j.s.s.context.TenantFilter -    accept-language: en-US,en;q=0.8
2026-02-04 18:40:54 [http-nio-8090-exec-6] DEBUG j.s.s.context.TenantFilter -    sec-fetch-site: same-origin
2026-02-04 18:40:54 [http-nio-8090-exec-6] DEBUG j.s.s.context.TenantFilter -    sec-fetch-mode: navigate
2026-02-04 18:40:54 [http-nio-8090-exec-6] DEBUG j.s.s.context.TenantFilter -    sec-fetch-user: ?1
2026-02-04 18:40:54 [http-nio-8090-exec-6] DEBUG j.s.s.context.TenantFilter -    sec-fetch-dest: document
2026-02-04 18:40:54 [http-nio-8090-exec-6] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua: "Not(A:Brand";v="8", "Chromium";v="144", "Brave";v="144"
2026-02-04 18:40:54 [http-nio-8090-exec-6] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-mobile: ?0
2026-02-04 18:40:54 [http-nio-8090-exec-6] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-platform: "Linux"
2026-02-04 18:40:54 [http-nio-8090-exec-6] DEBUG j.s.s.context.TenantFilter -    referer: http://defecto.localhost:8090/login?error
2026-02-04 18:40:54 [http-nio-8090-exec-6] DEBUG j.s.s.context.TenantFilter -    accept-encoding: gzip, deflate, br, zstd
2026-02-04 18:40:54 [http-nio-8090-exec-6] DEBUG j.s.s.context.TenantFilter -    cookie: TENANT_SESSION=5B8FECF5C4A52A6C0C474E7F7253ACFD
2026-02-04 18:40:54 [http-nio-8090-exec-6] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Despu√©s de validar dominio principal
2026-02-04 18:40:54 [http-nio-8090-exec-6] INFO  j.s.s.context.TenantFilter - üîç DEBUG - serverName: 'defecto.localhost', requestURI: '/login'
2026-02-04 18:40:54 [http-nio-8090-exec-6] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Punto CR√çTICO 1 - serverName: 'defecto.localhost', URI: '/login'
2026-02-04 18:40:54 [http-nio-8090-exec-6] DEBUG j.s.s.context.TenantFilter - üìå TenantFilter - RUTA: /login, M√©todo: GET
2026-02-04 18:40:54 [http-nio-8090-exec-6] DEBUG j.s.s.context.TenantFilter - üåê Server Name: defecto.localhost
2026-02-04 18:40:54 [http-nio-8090-exec-6] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio INICIO - serverName: 'defecto.localhost'
2026-02-04 18:40:54 [http-nio-8090-exec-6] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ¬øendsWith '.mibombay.com'? false
2026-02-04 18:40:54 [http-nio-8090-exec-6] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ‚ùå NO termina con .mibombay.com
2026-02-04 18:40:54 [http-nio-8090-exec-6] DEBUG j.s.s.context.TenantFilter - üîç Subdominio extra√≠do: null
2026-02-04 18:40:54 [http-nio-8090-exec-6] INFO  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio: 'null'
2026-02-04 18:40:54 [http-nio-8090-exec-6] WARN  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio es NULL! serverName: 'defecto.localhost'
2026-02-04 18:40:54 [http-nio-8090-exec-6] WARN  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - ¬øserverName.endsWith('.mibombay.com')? false
2026-02-04 18:40:54 [http-nio-8090-exec-6] INFO  j.s.s.controladores.InicioController - üîê GET /login - Subdominio: defecto.localhost
2026-02-04 18:40:54 [http-nio-8090-exec-6] DEBUG j.s.s.c.TenantContextCleanupFilter - ‚úÖ TenantContext limpiado - Hilo: 47, Request: /login, Empresa ID anterior: null
2026-02-04 18:40:54 [http-nio-8090-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2026-02-04 18:40:54 [http-nio-8090-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-02-04 18:40:54 [http-nio-8090-exec-7] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to http://defecto.localhost:8090/login
2026-02-04 18:40:54 [http-nio-8090-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2026-02-04 18:40:54 [http-nio-8090-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-02-04 18:40:54 [http-nio-8090-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2026-02-04 18:40:54 [http-nio-8090-exec-8] INFO  j.s.s.context.TenantFilter - üîç DEBUG TenantFilter - serverName: defecto.localhost, Host header: defecto.localhost:8090
2026-02-04 18:40:54 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    host: defecto.localhost:8090
2026-02-04 18:40:54 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    connection: keep-alive
2026-02-04 18:40:54 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-platform: "Linux"
2026-02-04 18:40:54 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    user-agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-04 18:40:54 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua: "Not(A:Brand";v="8", "Chromium";v="144", "Brave";v="144"
2026-02-04 18:40:54 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-mobile: ?0
2026-02-04 18:40:54 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    accept: image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8
2026-02-04 18:40:54 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    sec-gpc: 1
2026-02-04 18:40:54 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    accept-language: en-US,en;q=0.8
2026-02-04 18:40:54 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    sec-fetch-site: same-origin
2026-02-04 18:40:54 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    sec-fetch-mode: no-cors
2026-02-04 18:40:54 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    sec-fetch-dest: image
2026-02-04 18:40:54 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    referer: http://defecto.localhost:8090/login?error
2026-02-04 18:40:54 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    accept-encoding: gzip, deflate, br, zstd
2026-02-04 18:40:54 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter -    cookie: TENANT_SESSION=5B8FECF5C4A52A6C0C474E7F7253ACFD
2026-02-04 18:40:54 [http-nio-8090-exec-8] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Despu√©s de validar dominio principal
2026-02-04 18:40:54 [http-nio-8090-exec-8] INFO  j.s.s.context.TenantFilter - üîç DEBUG - serverName: 'defecto.localhost', requestURI: '/login'
2026-02-04 18:40:54 [http-nio-8090-exec-8] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Punto CR√çTICO 1 - serverName: 'defecto.localhost', URI: '/login'
2026-02-04 18:40:54 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter - üìå TenantFilter - RUTA: /login, M√©todo: GET
2026-02-04 18:40:54 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter - üåê Server Name: defecto.localhost
2026-02-04 18:40:54 [http-nio-8090-exec-8] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio INICIO - serverName: 'defecto.localhost'
2026-02-04 18:40:54 [http-nio-8090-exec-8] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ¬øendsWith '.mibombay.com'? false
2026-02-04 18:40:54 [http-nio-8090-exec-8] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ‚ùå NO termina con .mibombay.com
2026-02-04 18:40:54 [http-nio-8090-exec-8] DEBUG j.s.s.context.TenantFilter - üîç Subdominio extra√≠do: null
2026-02-04 18:40:54 [http-nio-8090-exec-8] INFO  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio: 'null'
2026-02-04 18:40:54 [http-nio-8090-exec-8] WARN  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio es NULL! serverName: 'defecto.localhost'
2026-02-04 18:40:54 [http-nio-8090-exec-8] WARN  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - ¬øserverName.endsWith('.mibombay.com')? false
2026-02-04 18:40:54 [http-nio-8090-exec-8] INFO  j.s.s.controladores.InicioController - üîê GET /login - Subdominio: defecto.localhost
2026-02-04 18:40:54 [http-nio-8090-exec-8] DEBUG j.s.s.c.TenantContextCleanupFilter - ‚úÖ TenantContext limpiado - Hilo: 49, Request: /login, Empresa ID anterior: null
2026-02-04 18:43:21 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-04 18:43:21 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-04 18:43:21 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-04 18:43:21 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-04 18:43:21 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-04 18:43:26 [restartedMain] INFO  j.s.s.SistemadefacturacioneinventarioApplication - Starting SistemadefacturacioneinventarioApplication using Java 17.0.18 with PID 10116 (/home/josepino/Desktop/SistemaFacturaEInventario/sistemadefacturacioneinventario/target/classes started by josepino in /home/josepino/Desktop/SistemaFacturaEInventario/sistemadefacturacioneinventario)
2026-02-04 18:43:26 [restartedMain] DEBUG j.s.s.SistemadefacturacioneinventarioApplication - Running with Spring Boot v3.5.8, Spring v6.2.14
2026-02-04 18:43:26 [restartedMain] INFO  j.s.s.SistemadefacturacioneinventarioApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-04 18:43:27 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-02-04 18:43:27 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-02-04 18:43:27 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-04 18:43:27 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 65 ms. Found 14 JPA repository interfaces.
2026-02-04 18:43:28 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8090 (http)
2026-02-04 18:43:28 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-04 18:43:28 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-02-04 18:43:28 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-04 18:43:28 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1158 ms
2026-02-04 18:43:28 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-04 18:43:28 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.36.Final
2026-02-04 18:43:28 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-04 18:43:28 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-04 18:43:28 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-04 18:43:28 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@375fd837
2026-02-04 18:43:28 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-04 18:43:28 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.45
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-04 18:43:29 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-04 18:43:29 [restartedMain] DEBUG org.hibernate.SQL - create table cierre_inventario_diario (id bigint not null auto_increment, cantidad_facturas integer not null, estado varchar(255), fecha date, observaciones varchar(255), total_ventas float(53) not null, empresa_id bigint not null, usuario_id bigint not null, primary key (id)) engine=InnoDB
2026-02-04 18:43:29 [restartedMain] DEBUG org.hibernate.SQL - create table cliente (id bigint not null auto_increment, activo bit not null, correo varchar(255), identificacion varchar(255), nombre varchar(255) not null, telefono varchar(255), empresa_id bigint not null, primary key (id)) engine=InnoDB
2026-02-04 18:43:29 [restartedMain] DEBUG org.hibernate.SQL - create table detalle_cierre_inventario_diario (id bigint not null auto_increment, costo_unitario float(53) not null, diferencia float(53) not null, stock_desperdicio float(53) not null, stock_merma float(53) not null, stock_real float(53) not null, stock_teorico float(53) not null, valor_diferencia float(53) not null, cierre_id bigint not null, ingrediente_id bigint, producto_id bigint, primary key (id)) engine=InnoDB
2026-02-04 18:43:29 [restartedMain] DEBUG org.hibernate.SQL - create table empresa (id bigint not null auto_increment, email_contacto varchar(255), estado bit not null, fecha_creacion date, nombre varchar(255), plan varchar(255), subdominio varchar(255), telefono varchar(255), primary key (id)) engine=InnoDB
2026-02-04 18:43:29 [restartedMain] DEBUG org.hibernate.SQL - create table factura (id integer not null auto_increment, estado varchar(255), fecha date, forma_pago varchar(255), iva float(53) not null, numero_factura varchar(255), subtotal float(53) not null, total float(53) not null, cliente_id bigint, empresa_id bigint not null, primary key (id)) engine=InnoDB
2026-02-04 18:43:29 [restartedMain] DEBUG org.hibernate.SQL - create table factura_detalle (id bigint not null auto_increment, cantidad integer not null, precio_unitario float(53) not null, subtotal float(53) not null, factura_id integer not null, producto_id bigint not null, primary key (id)) engine=InnoDB
2026-02-04 18:43:29 [restartedMain] DEBUG org.hibernate.SQL - create table factura_detalle_proveedor (id bigint not null auto_increment, cantidad float(53) not null, precio_unitario float(53) not null, subtotal float(53) not null, factura_proveedor_id bigint not null, ingrediente_id bigint not null, primary key (id)) engine=InnoDB
2026-02-04 18:43:29 [restartedMain] DEBUG org.hibernate.SQL - create table factura_proveedor (id bigint not null auto_increment, estado varchar(255), fecha date, iva float(53), numero_factura varchar(255), subtotal float(53), total float(53), empresa_id bigint not null, proveedor_id bigint not null, primary key (id)) engine=InnoDB
2026-02-04 18:43:29 [restartedMain] DEBUG org.hibernate.SQL - create table ingrediente (id bigint not null auto_increment, activo bit not null, nombre varchar(255), precio float(53) not null, stock_actual float(53) not null, stock_minimo float(53) not null, unidad_medida varchar(255), empresa_id bigint not null, primary key (id)) engine=InnoDB
2026-02-04 18:43:29 [restartedMain] DEBUG org.hibernate.SQL - create table producto (id bigint not null auto_increment, activo bit not null, nombre varchar(255), precio_compra float(53), precio_venta float(53), stock float(53), tiene_receta bit not null, unidad_medida_venta varchar(255), empresa_id bigint not null, receta_id bigint, primary key (id)) engine=InnoDB
2026-02-04 18:43:29 [restartedMain] DEBUG org.hibernate.SQL - create table proveedor (id bigint not null auto_increment, activo bit, correo varchar(255), identificacion varchar(255), nombre varchar(255), telefono varchar(255), empresa_id bigint not null, primary key (id)) engine=InnoDB
2026-02-04 18:43:29 [restartedMain] DEBUG org.hibernate.SQL - create table receta (id bigint not null auto_increment, costo_receta float(53) not null, descripcion varchar(255), nombre varchar(255), empresa_id bigint not null, primary key (id)) engine=InnoDB
2026-02-04 18:43:29 [restartedMain] DEBUG org.hibernate.SQL - create table receta_detalle (id integer not null auto_increment, cantidad_ingrediente float(53) not null, ingrediente_id bigint not null, receta_id bigint not null, primary key (id)) engine=InnoDB
2026-02-04 18:43:29 [restartedMain] DEBUG org.hibernate.SQL - create table sucursal (id bigint not null auto_increment, direccion varchar(255), email varchar(255), nombre varchar(255), telefono varchar(255), empresa_id bigint not null, primary key (id)) engine=InnoDB
2026-02-04 18:43:29 [restartedMain] DEBUG org.hibernate.SQL - create table usuario (id bigint not null auto_increment, activo bit not null, contrasenna varchar(255) not null, nombre_usuario varchar(255), rol varchar(255) not null, empresa_id bigint, sucursal_id bigint, primary key (id)) engine=InnoDB
2026-02-04 18:43:29 [restartedMain] DEBUG org.hibernate.SQL - alter table cierre_inventario_diario drop index UK3olt7fv3qt8efj1m5p7q3j1ms
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table cierre_inventario_diario add constraint UK3olt7fv3qt8efj1m5p7q3j1ms unique (empresa_id, fecha)
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table cliente drop index UKhadme0meght491lixmp6qg06b
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table cliente add constraint UKhadme0meght491lixmp6qg06b unique (empresa_id, nombre)
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table detalle_cierre_inventario_diario drop index UKk16g51km9nr5iqw2wxck8b358
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table detalle_cierre_inventario_diario add constraint UKk16g51km9nr5iqw2wxck8b358 unique (cierre_id, producto_id)
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table detalle_cierre_inventario_diario drop index UKca6rduw6wqlirrbdd5tvj3u2c
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table detalle_cierre_inventario_diario add constraint UKca6rduw6wqlirrbdd5tvj3u2c unique (cierre_id, ingrediente_id)
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table empresa drop index UK89dtla0x9lfndxn4iha8gm2al
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table empresa add constraint UK89dtla0x9lfndxn4iha8gm2al unique (subdominio)
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table factura drop index UKa9fu6ob19w8pdw35ilspmgje
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table factura add constraint UKa9fu6ob19w8pdw35ilspmgje unique (empresa_id, numero_factura)
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table factura_detalle_proveedor drop index UK646r3o8f5xbf9ikhql9qcr81i
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table factura_detalle_proveedor add constraint UK646r3o8f5xbf9ikhql9qcr81i unique (factura_proveedor_id, ingrediente_id)
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table factura_proveedor drop index UK23y7stifd8wv2cixfjhc0g9kq
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table factura_proveedor add constraint UK23y7stifd8wv2cixfjhc0g9kq unique (empresa_id, numero_factura)
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table ingrediente drop index UKjs70l2p4uno2dclt73ffva7c9
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table ingrediente add constraint UKjs70l2p4uno2dclt73ffva7c9 unique (empresa_id, nombre)
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table producto drop index UKbeimg5dnx60dx87os8deoet9l
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table producto add constraint UKbeimg5dnx60dx87os8deoet9l unique (empresa_id, nombre)
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table proveedor drop index UKe0crun39p1g01db6lw29cqgmg
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table proveedor add constraint UKe0crun39p1g01db6lw29cqgmg unique (empresa_id, nombre)
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table proveedor drop index UKq9ef37e05x58intf9g660ubhs
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table proveedor add constraint UKq9ef37e05x58intf9g660ubhs unique (empresa_id, identificacion)
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table proveedor drop index UK5iq7yn62p2yff2ibnyebm81yk
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table proveedor add constraint UK5iq7yn62p2yff2ibnyebm81yk unique (empresa_id, correo)
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table receta drop index UK143eh9phim5gxih4uhnxf5rjy
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table receta add constraint UK143eh9phim5gxih4uhnxf5rjy unique (empresa_id, nombre)
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table receta_detalle drop index UK5i7rpjy4jshlcxwopit7e7l6v
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table receta_detalle add constraint UK5i7rpjy4jshlcxwopit7e7l6v unique (receta_id, ingrediente_id)
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table sucursal drop index UKifuc748bnikr6k2anqbkfcjof
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table sucursal add constraint UKifuc748bnikr6k2anqbkfcjof unique (empresa_id, nombre)
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table usuario drop index UKl3t4o0bbvqig8iki4a9v5l2au
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table usuario add constraint UKl3t4o0bbvqig8iki4a9v5l2au unique (empresa_id, nombre_usuario)
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table cierre_inventario_diario add constraint FKrxj5xe6of8lbbaygm6wn1yglc foreign key (empresa_id) references empresa (id)
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table cierre_inventario_diario add constraint FK7ydwat6wxaari9ti21t61pf2h foreign key (usuario_id) references usuario (id)
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table cliente add constraint FKkbui05oidjdj4nb0283u4t319 foreign key (empresa_id) references empresa (id)
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table detalle_cierre_inventario_diario add constraint FKai0hytaggprm1fpr57qs1r16y foreign key (cierre_id) references cierre_inventario_diario (id)
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table detalle_cierre_inventario_diario add constraint FKnhr66xfhrrt2lf9hcr6osvkwi foreign key (ingrediente_id) references ingrediente (id)
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table detalle_cierre_inventario_diario add constraint FKo04686jk3h9e8lercg1o2p4qx foreign key (producto_id) references producto (id)
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table factura add constraint FK2602efsrpmevi8yxg464stfn5 foreign key (cliente_id) references cliente (id)
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table factura add constraint FKtmilsq58fksgb0ubkele0rhec foreign key (empresa_id) references empresa (id)
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table factura_detalle add constraint FK82g5tpb19dn0ed3dh8rjepfeo foreign key (factura_id) references factura (id)
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table factura_detalle add constraint FK49cxxxb69hbp79ot7q72d1amt foreign key (producto_id) references producto (id)
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table factura_detalle_proveedor add constraint FKoflc51frkgklo8alhid2j8al7 foreign key (factura_proveedor_id) references factura_proveedor (id)
2026-02-04 18:43:30 [restartedMain] DEBUG org.hibernate.SQL - alter table factura_detalle_proveedor add constraint FK3hoqatnjgbbmx6xrh35yqppuf foreign key (ingrediente_id) references ingrediente (id)
2026-02-04 18:43:31 [restartedMain] DEBUG org.hibernate.SQL - alter table factura_proveedor add constraint FKhlrb8uke31inikggh6lkw2dkd foreign key (empresa_id) references empresa (id)
2026-02-04 18:43:31 [restartedMain] DEBUG org.hibernate.SQL - alter table factura_proveedor add constraint FK7f8no9r5msrqi7tdpxtxv5rox foreign key (proveedor_id) references proveedor (id)
2026-02-04 18:43:31 [restartedMain] DEBUG org.hibernate.SQL - alter table ingrediente add constraint FK12fcsy4t6kmmc1kqwdvf6qoyb foreign key (empresa_id) references empresa (id)
2026-02-04 18:43:31 [restartedMain] DEBUG org.hibernate.SQL - alter table producto add constraint FKc2ad8rakag2tc01ww39eqrbv6 foreign key (empresa_id) references empresa (id)
2026-02-04 18:43:31 [restartedMain] DEBUG org.hibernate.SQL - alter table producto add constraint FKoug9w3p6qwyhi5ogt6806xkaj foreign key (receta_id) references receta (id)
2026-02-04 18:43:31 [restartedMain] DEBUG org.hibernate.SQL - alter table proveedor add constraint FK8cnkydwgpaydac6bnsv9t3fre foreign key (empresa_id) references empresa (id)
2026-02-04 18:43:31 [restartedMain] DEBUG org.hibernate.SQL - alter table receta add constraint FKdgije9w7wnv4qr14tddx3d1mb foreign key (empresa_id) references empresa (id)
2026-02-04 18:43:31 [restartedMain] DEBUG org.hibernate.SQL - alter table receta_detalle add constraint FKqqxfeku8edppnlksgq3yyetfg foreign key (ingrediente_id) references ingrediente (id)
2026-02-04 18:43:31 [restartedMain] DEBUG org.hibernate.SQL - alter table receta_detalle add constraint FK3ymmbjgelr0kjbhi7880bmmk3 foreign key (receta_id) references receta (id)
2026-02-04 18:43:31 [restartedMain] DEBUG org.hibernate.SQL - alter table sucursal add constraint FK3w56rbjykxbp2e79cdq0xsghd foreign key (empresa_id) references empresa (id)
2026-02-04 18:43:31 [restartedMain] DEBUG org.hibernate.SQL - alter table usuario add constraint FK87ckfs30l64gnivnfk7ywp8l6 foreign key (empresa_id) references empresa (id)
2026-02-04 18:43:31 [restartedMain] DEBUG org.hibernate.SQL - alter table usuario add constraint FKiaauynefn97k8nl88ss4snyl6 foreign key (sucursal_id) references sucursal (id)
2026-02-04 18:43:31 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-04 18:43:31 [restartedMain] DEBUG o.h.s.internal.StatisticsInitiator - Statistics initialized [enabled=false]
2026-02-04 18:43:31 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-04 18:43:32 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - üîê Configurando BCryptPasswordEncoder para encriptaci√≥n de contrase√±as
2026-02-04 18:43:33 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2026-02-04 18:43:33 [restartedMain] INFO  j.s.s.config.WebConfig - ‚öôÔ∏è Configurando interceptores de Spring MVC
2026-02-04 18:43:33 [restartedMain] DEBUG j.s.s.config.WebConfig - Registrando CierreDiarioInterceptor
2026-02-04 18:43:33 [restartedMain] DEBUG j.s.s.config.WebConfig - CierreDiarioInterceptor configurado. Patrones incluidos: /**
2026-02-04 18:43:33 [restartedMain] DEBUG j.s.s.config.WebConfig - Patrones excluidos: /cierres/**, /login, /css/**, /js/**, /error
2026-02-04 18:43:33 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name usuarioServicio
2026-02-04 18:43:33 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - üõ°Ô∏è Configurando SecurityFilterChain para SUPERADMIN (Orden 1)
2026-02-04 18:43:33 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - ‚úÖ SecurityFilterChain SUPERADMIN configurado
2026-02-04 18:43:33 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure Or [Mvc [pattern='/superadmin/**']] with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-02-04 18:43:33 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - üõ°Ô∏è Configurando SecurityFilterChain - Iniciando configuraci√≥n de seguridad
2026-02-04 18:43:33 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - ‚úÖ SecurityFilterChain configurado exitosamente
2026-02-04 18:43:33 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - Configuraci√≥n de seguridad aplicada:
2026-02-04 18:43:33 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - P√°ginas p√∫blicas: /, /login, /acceso-denegado, /css/**, /js/**, /error
2026-02-04 18:43:33 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - Solo ADMIN: /compras/**, /proveedores/**
2026-02-04 18:43:33 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - ADMIN o DEV: /productos/**, /ingredientes/**, /recetas/**, /reportes/**, /cierres/**
2026-02-04 18:43:33 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - Login: /login, Logout: /logout
2026-02-04 18:43:33 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - P√°gina acceso denegado: /acceso-denegado
2026-02-04 18:43:33 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure Or [Mvc [pattern='/**']] with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, ConcurrentSessionFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-02-04 18:43:33 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-04 18:43:33 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8090 (http) with context path '/'
2026-02-04 18:43:33 [restartedMain] INFO  j.s.s.SistemadefacturacioneinventarioApplication - Started SistemadefacturacioneinventarioApplication in 6.929 seconds (process running for 7.29)
2026-02-04 18:43:33 [restartedMain] INFO  j.s.s.config.UsuarioInicial - üîß Iniciando carga de usuarios iniciales
2026-02-04 18:43:33 [restartedMain] DEBUG org.hibernate.SQL - select count(*) from empresa e1_0
2026-02-04 18:43:33 [restartedMain] WARN  j.s.s.config.UsuarioInicial - ‚ö†Ô∏è No hay empresas en la BD. Los usuarios se crear√°n sin empresa.
2026-02-04 18:43:33 [restartedMain] WARN  j.s.s.config.UsuarioInicial - ‚ö†Ô∏è Ejecuta primero el DataInitializer para crear empresa por defecto.
2026-02-04 18:43:33 [restartedMain] INFO  j.s.s.config.DataInitializer - üöÄ INICIANDO CARGA DE DATOS INICIALES DEL SISTEMA
2026-02-04 18:43:33 [restartedMain] DEBUG org.hibernate.SQL - select count(*) from empresa e1_0
2026-02-04 18:43:33 [restartedMain] INFO  j.s.s.config.DataInitializer - üìÅ No se encontraron empresas. Creando empresa por defecto...
2026-02-04 18:43:33 [restartedMain] DEBUG org.hibernate.SQL - insert into empresa (email_contacto,estado,fecha_creacion,nombre,plan,subdominio,telefono) values (?,?,?,?,?,?,?)
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:VARCHAR) <- [null]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (2:BOOLEAN) <- [true]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (3:DATE) <- [null]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (4:VARCHAR) <- [Sistema por Defecto]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (5:VARCHAR) <- [null]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (6:VARCHAR) <- [defecto]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (7:VARCHAR) <- [null]
2026-02-04 18:43:33 [restartedMain] INFO  j.s.s.config.DataInitializer - üè¢ Empresa por defecto creada exitosamente:
2026-02-04 18:43:33 [restartedMain] INFO  j.s.s.config.DataInitializer -    üìõ Nombre: Sistema por Defecto
2026-02-04 18:43:33 [restartedMain] INFO  j.s.s.config.DataInitializer -    üåê Subdominio: defecto
2026-02-04 18:43:33 [restartedMain] INFO  j.s.s.config.DataInitializer -    üî¢ ID: 1
2026-02-04 18:43:33 [restartedMain] INFO  j.s.s.config.DataInitializer -    üîó Acceso: http://defecto.localhost:8080
2026-02-04 18:43:33 [restartedMain] DEBUG org.hibernate.SQL - select c1_0.id from cliente c1_0 left join empresa e1_0 on e1_0.id=c1_0.empresa_id where c1_0.nombre=? and e1_0.id=? limit ?
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:VARCHAR) <- [Consumidor Final]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (2:BIGINT) <- [1]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (3:INTEGER) <- [1]
2026-02-04 18:43:33 [restartedMain] DEBUG org.hibernate.SQL - insert into cliente (activo,correo,empresa_id,identificacion,nombre,telefono) values (?,?,?,?,?,?)
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:BOOLEAN) <- [true]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (2:VARCHAR) <- [consumidor@final.com]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (3:BIGINT) <- [1]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (4:VARCHAR) <- [CF9999999999999]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (5:VARCHAR) <- [Consumidor Final]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (6:VARCHAR) <- [N/A]
2026-02-04 18:43:33 [restartedMain] INFO  j.s.s.config.DataInitializer - üë§ Cliente por defecto creado:
2026-02-04 18:43:33 [restartedMain] INFO  j.s.s.config.DataInitializer -    üìõ Nombre: Consumidor Final
2026-02-04 18:43:33 [restartedMain] INFO  j.s.s.config.DataInitializer -    üî¢ ID: CF9999999999999
2026-02-04 18:43:33 [restartedMain] INFO  j.s.s.config.DataInitializer -    üè¢ Para empresa: Sistema por Defecto
2026-02-04 18:43:33 [restartedMain] DEBUG org.hibernate.SQL - select count(u1_0.id) from usuario u1_0 left join empresa e1_0 on e1_0.id=u1_0.empresa_id where e1_0.id=?
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:BIGINT) <- [1]
2026-02-04 18:43:33 [restartedMain] INFO  j.s.s.config.DataInitializer - üë• No hay usuarios para empresa Sistema por Defecto. Creando usuarios por defecto...
2026-02-04 18:43:33 [restartedMain] DEBUG j.s.s.context.TenantContext - üîß TenantContext.setCurrentTenant(1) - Hilo: 28
2026-02-04 18:43:33 [restartedMain] DEBUG org.hibernate.SQL - insert into usuario (activo,contrasenna,empresa_id,nombre_usuario,rol,sucursal_id) values (?,?,?,?,?,?)
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:BOOLEAN) <- [true]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (2:VARCHAR) <- [$2a$10$2xevqQhGxjLcWOsf7FSRteMNFULrPy0CrI4sVAegjZlk37yYP1zbq]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (3:BIGINT) <- [1]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (4:VARCHAR) <- [admin]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (5:VARCHAR) <- [ADMIN]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (6:BIGINT) <- [null]
2026-02-04 18:43:33 [restartedMain] INFO  j.s.s.config.DataInitializer -    üë§ ADMIN: admin/admin123
2026-02-04 18:43:33 [restartedMain] DEBUG org.hibernate.SQL - insert into usuario (activo,contrasenna,empresa_id,nombre_usuario,rol,sucursal_id) values (?,?,?,?,?,?)
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:BOOLEAN) <- [true]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (2:VARCHAR) <- [$2a$10$yCTHyhJLEZdKJ4MhuvhcdevBHkgMxMAPe1r8ABekaZ1JQiuSi55te]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (3:BIGINT) <- [1]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (4:VARCHAR) <- [cajero]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (5:VARCHAR) <- [CAJERO]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (6:BIGINT) <- [null]
2026-02-04 18:43:33 [restartedMain] INFO  j.s.s.config.DataInitializer -    üë§ CAJERO: cajero/cajero123
2026-02-04 18:43:33 [restartedMain] DEBUG org.hibernate.SQL - insert into usuario (activo,contrasenna,empresa_id,nombre_usuario,rol,sucursal_id) values (?,?,?,?,?,?)
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:BOOLEAN) <- [true]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (2:VARCHAR) <- [$2a$10$9t.FX4MaM64YAJuDdph4P.YYQKwiO1f44IEX/tN5OC5asLFQLw6/q]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (3:BIGINT) <- [1]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (4:VARCHAR) <- [dev]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (5:VARCHAR) <- [DEV]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (6:BIGINT) <- [null]
2026-02-04 18:43:33 [restartedMain] INFO  j.s.s.config.DataInitializer -    üë§ DEV: dev/dev123
2026-02-04 18:43:33 [restartedMain] INFO  j.s.s.config.DataInitializer - ‚úÖ Usuarios creados exitosamente para empresa Sistema por Defecto
2026-02-04 18:43:33 [restartedMain] WARN  j.s.s.config.DataInitializer - ‚ö†Ô∏è  ¬°IMPORTANTE! Cambia estas contrase√±as en producci√≥n.
2026-02-04 18:43:33 [restartedMain] DEBUG j.s.s.context.TenantContext - üßπ TenantContext.clear() - Hilo: 28, Tenant anterior: 1
2026-02-04 18:43:33 [restartedMain] INFO  j.s.s.config.DataInitializer - üëë Verificando existencia de usuario SUPER_ADMIN
2026-02-04 18:43:33 [restartedMain] DEBUG org.hibernate.SQL - select u1_0.id from usuario u1_0 where u1_0.rol=? limit ?
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:VARCHAR) <- [SUPER_ADMIN]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (2:INTEGER) <- [1]
2026-02-04 18:43:33 [restartedMain] INFO  j.s.s.config.DataInitializer - üëë No existe SUPER_ADMIN. Creando usuario maestro...
2026-02-04 18:43:33 [restartedMain] DEBUG org.hibernate.SQL - insert into usuario (activo,contrasenna,empresa_id,nombre_usuario,rol,sucursal_id) values (?,?,?,?,?,?)
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:BOOLEAN) <- [true]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (2:VARCHAR) <- [$2a$10$BCi4P.P4kKf28UUgDoJ1pePVjl2TFNbtsE351r2lV8Xcq6yZVbvOK]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (3:BIGINT) <- [null]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (4:VARCHAR) <- [adminmaster]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (5:VARCHAR) <- [SUPER_ADMIN]
2026-02-04 18:43:33 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (6:BIGINT) <- [null]
2026-02-04 18:43:33 [restartedMain] WARN  j.s.s.config.DataInitializer - ‚ö†Ô∏è  USUARIO SUPER_ADMIN CREADO:
2026-02-04 18:43:33 [restartedMain] WARN  j.s.s.config.DataInitializer -    üé≠ Rol: SUPER_ADMIN
2026-02-04 18:43:33 [restartedMain] INFO  j.s.s.config.DataInitializer - ‚úÖ CARGA DE DATOS INICIALES COMPLETADA EXITOSAMENTE
2026-02-04 18:43:42 [http-nio-8090-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-04 18:43:42 [http-nio-8090-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-04 18:43:42 [http-nio-8090-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-02-04 18:43:42 [http-nio-8090-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2026-02-04 18:43:42 [http-nio-8090-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-02-04 18:43:42 [http-nio-8090-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2026-02-04 18:43:42 [http-nio-8090-exec-1] INFO  j.s.s.context.TenantFilter - üîç DEBUG TenantFilter - serverName: defecto.localhost, Host header: defecto.localhost:8090
2026-02-04 18:43:42 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    host: defecto.localhost:8090
2026-02-04 18:43:42 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    connection: keep-alive
2026-02-04 18:43:42 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua: "Not(A:Brand";v="8", "Chromium";v="144", "Brave";v="144"
2026-02-04 18:43:42 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-mobile: ?0
2026-02-04 18:43:42 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-platform: "Linux"
2026-02-04 18:43:42 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    upgrade-insecure-requests: 1
2026-02-04 18:43:42 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    user-agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-04 18:43:42 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8
2026-02-04 18:43:42 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    sec-gpc: 1
2026-02-04 18:43:42 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    accept-language: en-US,en;q=0.8
2026-02-04 18:43:42 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    sec-fetch-site: none
2026-02-04 18:43:42 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    sec-fetch-mode: navigate
2026-02-04 18:43:42 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    sec-fetch-user: ?1
2026-02-04 18:43:42 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    sec-fetch-dest: document
2026-02-04 18:43:42 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    accept-encoding: gzip, deflate, br, zstd
2026-02-04 18:43:42 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter -    cookie: TENANT_SESSION=5B8FECF5C4A52A6C0C474E7F7253ACFD
2026-02-04 18:43:42 [http-nio-8090-exec-1] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Despu√©s de validar dominio principal
2026-02-04 18:43:42 [http-nio-8090-exec-1] INFO  j.s.s.context.TenantFilter - üîç DEBUG - serverName: 'defecto.localhost', requestURI: '/login'
2026-02-04 18:43:42 [http-nio-8090-exec-1] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Punto CR√çTICO 1 - serverName: 'defecto.localhost', URI: '/login'
2026-02-04 18:43:42 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter - üìå TenantFilter - RUTA: /login, M√©todo: GET
2026-02-04 18:43:42 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter - üåê Server Name: defecto.localhost
2026-02-04 18:43:42 [http-nio-8090-exec-1] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio INICIO - serverName: 'defecto.localhost'
2026-02-04 18:43:42 [http-nio-8090-exec-1] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ¬øendsWith '.mibombay.com'? false
2026-02-04 18:43:42 [http-nio-8090-exec-1] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ‚ùå NO termina con .mibombay.com
2026-02-04 18:43:42 [http-nio-8090-exec-1] DEBUG j.s.s.context.TenantFilter - üîç Subdominio extra√≠do: null
2026-02-04 18:43:42 [http-nio-8090-exec-1] INFO  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio: 'null'
2026-02-04 18:43:42 [http-nio-8090-exec-1] WARN  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio es NULL! serverName: 'defecto.localhost'
2026-02-04 18:43:42 [http-nio-8090-exec-1] WARN  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - ¬øserverName.endsWith('.mibombay.com')? false
2026-02-04 18:43:42 [http-nio-8090-exec-1] INFO  j.s.s.controladores.InicioController - üîê GET /login - Subdominio: defecto.localhost
2026-02-04 18:43:43 [http-nio-8090-exec-1] DEBUG j.s.s.c.TenantContextCleanupFilter - ‚úÖ TenantContext limpiado - Hilo: 41, Request: /login, Empresa ID anterior: null
2026-02-04 18:43:43 [http-nio-8090-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2026-02-04 18:43:43 [http-nio-8090-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-02-04 18:43:43 [http-nio-8090-exec-2] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to http://defecto.localhost:8090/login
2026-02-04 18:43:43 [http-nio-8090-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2026-02-04 18:43:43 [http-nio-8090-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-02-04 18:43:43 [http-nio-8090-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2026-02-04 18:43:43 [http-nio-8090-exec-3] INFO  j.s.s.context.TenantFilter - üîç DEBUG TenantFilter - serverName: defecto.localhost, Host header: defecto.localhost:8090
2026-02-04 18:43:43 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    host: defecto.localhost:8090
2026-02-04 18:43:43 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    connection: keep-alive
2026-02-04 18:43:43 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-platform: "Linux"
2026-02-04 18:43:43 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    user-agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-04 18:43:43 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua: "Not(A:Brand";v="8", "Chromium";v="144", "Brave";v="144"
2026-02-04 18:43:43 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-mobile: ?0
2026-02-04 18:43:43 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    accept: image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8
2026-02-04 18:43:43 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    sec-gpc: 1
2026-02-04 18:43:43 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    accept-language: en-US,en;q=0.8
2026-02-04 18:43:43 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    sec-fetch-site: same-origin
2026-02-04 18:43:43 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    sec-fetch-mode: no-cors
2026-02-04 18:43:43 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    sec-fetch-dest: image
2026-02-04 18:43:43 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    referer: http://defecto.localhost:8090/login
2026-02-04 18:43:43 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    accept-encoding: gzip, deflate, br, zstd
2026-02-04 18:43:43 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter -    cookie: TENANT_SESSION=5B8FECF5C4A52A6C0C474E7F7253ACFD
2026-02-04 18:43:43 [http-nio-8090-exec-3] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Despu√©s de validar dominio principal
2026-02-04 18:43:43 [http-nio-8090-exec-3] INFO  j.s.s.context.TenantFilter - üîç DEBUG - serverName: 'defecto.localhost', requestURI: '/login'
2026-02-04 18:43:43 [http-nio-8090-exec-3] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Punto CR√çTICO 1 - serverName: 'defecto.localhost', URI: '/login'
2026-02-04 18:43:43 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter - üìå TenantFilter - RUTA: /login, M√©todo: GET
2026-02-04 18:43:43 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter - üåê Server Name: defecto.localhost
2026-02-04 18:43:43 [http-nio-8090-exec-3] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio INICIO - serverName: 'defecto.localhost'
2026-02-04 18:43:43 [http-nio-8090-exec-3] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ¬øendsWith '.mibombay.com'? false
2026-02-04 18:43:43 [http-nio-8090-exec-3] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ‚ùå NO termina con .mibombay.com
2026-02-04 18:43:43 [http-nio-8090-exec-3] DEBUG j.s.s.context.TenantFilter - üîç Subdominio extra√≠do: null
2026-02-04 18:43:43 [http-nio-8090-exec-3] INFO  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio: 'null'
2026-02-04 18:43:43 [http-nio-8090-exec-3] WARN  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio es NULL! serverName: 'defecto.localhost'
2026-02-04 18:43:43 [http-nio-8090-exec-3] WARN  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - ¬øserverName.endsWith('.mibombay.com')? false
2026-02-04 18:43:43 [http-nio-8090-exec-3] INFO  j.s.s.controladores.InicioController - üîê GET /login - Subdominio: defecto.localhost
2026-02-04 18:43:43 [http-nio-8090-exec-3] DEBUG j.s.s.c.TenantContextCleanupFilter - ‚úÖ TenantContext limpiado - Hilo: 43, Request: /login, Empresa ID anterior: null
2026-02-04 18:43:48 [http-nio-8090-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2026-02-04 18:43:48 [http-nio-8090-exec-4] DEBUG j.s.s.servicios.UsuarioServicio - Autenticando usuario: admin para la empresa ID: null
2026-02-04 18:43:48 [http-nio-8090-exec-4] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio INICIO - serverName: 'defecto.localhost'
2026-02-04 18:43:48 [http-nio-8090-exec-4] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ¬øendsWith '.mibombay.com'? false
2026-02-04 18:43:48 [http-nio-8090-exec-4] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ‚ùå NO termina con .mibombay.com
2026-02-04 18:43:48 [http-nio-8090-exec-4] INFO  j.s.s.servicios.UsuarioServicio - üîê Login - Usuario: admin | Subdominio: null
2026-02-04 18:43:48 [http-nio-8090-exec-4] DEBUG org.hibernate.SQL - select e1_0.id,e1_0.email_contacto,e1_0.estado,e1_0.fecha_creacion,e1_0.nombre,e1_0.plan,e1_0.subdominio,e1_0.telefono from empresa e1_0 where e1_0.subdominio is null
2026-02-04 18:43:48 [http-nio-8090-exec-4] ERROR j.s.s.servicios.UsuarioServicio - Empresa no encontrada para subdominio: null
2026-02-04 18:43:48 [http-nio-8090-exec-4] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'admin'
2026-02-04 18:43:48 [http-nio-8090-exec-4] DEBUG o.s.s.authentication.ProviderManager - Authentication failed with provider DaoAuthenticationProvider since Bad credentials
2026-02-04 18:43:48 [http-nio-8090-exec-4] DEBUG o.s.s.authentication.ProviderManager - Denying authentication since all attempted providers failed
2026-02-04 18:43:48 [http-nio-8090-exec-4] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2026-02-04 18:43:48 [http-nio-8090-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2026-02-04 18:43:48 [http-nio-8090-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-02-04 18:43:48 [http-nio-8090-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?error
2026-02-04 18:43:48 [http-nio-8090-exec-5] INFO  j.s.s.context.TenantFilter - üîç DEBUG TenantFilter - serverName: defecto.localhost, Host header: defecto.localhost:8090
2026-02-04 18:43:48 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    host: defecto.localhost:8090
2026-02-04 18:43:48 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    connection: keep-alive
2026-02-04 18:43:48 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    cache-control: max-age=0
2026-02-04 18:43:48 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    upgrade-insecure-requests: 1
2026-02-04 18:43:48 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    user-agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-04 18:43:48 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8
2026-02-04 18:43:48 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    sec-gpc: 1
2026-02-04 18:43:48 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    accept-language: en-US,en;q=0.8
2026-02-04 18:43:48 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    sec-fetch-site: same-origin
2026-02-04 18:43:48 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    sec-fetch-mode: navigate
2026-02-04 18:43:48 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    sec-fetch-user: ?1
2026-02-04 18:43:48 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    sec-fetch-dest: document
2026-02-04 18:43:48 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua: "Not(A:Brand";v="8", "Chromium";v="144", "Brave";v="144"
2026-02-04 18:43:48 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-mobile: ?0
2026-02-04 18:43:48 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-platform: "Linux"
2026-02-04 18:43:48 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    referer: http://defecto.localhost:8090/login
2026-02-04 18:43:48 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    accept-encoding: gzip, deflate, br, zstd
2026-02-04 18:43:48 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter -    cookie: TENANT_SESSION=5B8FECF5C4A52A6C0C474E7F7253ACFD
2026-02-04 18:43:48 [http-nio-8090-exec-5] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Despu√©s de validar dominio principal
2026-02-04 18:43:48 [http-nio-8090-exec-5] INFO  j.s.s.context.TenantFilter - üîç DEBUG - serverName: 'defecto.localhost', requestURI: '/login'
2026-02-04 18:43:48 [http-nio-8090-exec-5] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Punto CR√çTICO 1 - serverName: 'defecto.localhost', URI: '/login'
2026-02-04 18:43:48 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter - üìå TenantFilter - RUTA: /login, M√©todo: GET
2026-02-04 18:43:48 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter - üåê Server Name: defecto.localhost
2026-02-04 18:43:48 [http-nio-8090-exec-5] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio INICIO - serverName: 'defecto.localhost'
2026-02-04 18:43:48 [http-nio-8090-exec-5] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ¬øendsWith '.mibombay.com'? false
2026-02-04 18:43:48 [http-nio-8090-exec-5] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ‚ùå NO termina con .mibombay.com
2026-02-04 18:43:48 [http-nio-8090-exec-5] DEBUG j.s.s.context.TenantFilter - üîç Subdominio extra√≠do: null
2026-02-04 18:43:48 [http-nio-8090-exec-5] INFO  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio: 'null'
2026-02-04 18:43:48 [http-nio-8090-exec-5] WARN  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio es NULL! serverName: 'defecto.localhost'
2026-02-04 18:43:48 [http-nio-8090-exec-5] WARN  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - ¬øserverName.endsWith('.mibombay.com')? false
2026-02-04 18:43:48 [http-nio-8090-exec-5] INFO  j.s.s.controladores.InicioController - üîê GET /login - Subdominio: defecto.localhost
2026-02-04 18:43:48 [http-nio-8090-exec-5] DEBUG j.s.s.c.TenantContextCleanupFilter - ‚úÖ TenantContext limpiado - Hilo: 45, Request: /login, Empresa ID anterior: null
2026-02-04 18:43:48 [http-nio-8090-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2026-02-04 18:43:48 [http-nio-8090-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-02-04 18:43:48 [http-nio-8090-exec-6] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to http://defecto.localhost:8090/login
2026-02-04 18:43:48 [http-nio-8090-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2026-02-04 18:43:48 [http-nio-8090-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-02-04 18:43:48 [http-nio-8090-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2026-02-04 18:43:48 [http-nio-8090-exec-7] INFO  j.s.s.context.TenantFilter - üîç DEBUG TenantFilter - serverName: defecto.localhost, Host header: defecto.localhost:8090
2026-02-04 18:43:48 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    host: defecto.localhost:8090
2026-02-04 18:43:48 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    connection: keep-alive
2026-02-04 18:43:48 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-platform: "Linux"
2026-02-04 18:43:48 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    user-agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-04 18:43:48 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua: "Not(A:Brand";v="8", "Chromium";v="144", "Brave";v="144"
2026-02-04 18:43:48 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-mobile: ?0
2026-02-04 18:43:48 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    accept: image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8
2026-02-04 18:43:48 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    sec-gpc: 1
2026-02-04 18:43:48 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    accept-language: en-US,en;q=0.8
2026-02-04 18:43:48 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    sec-fetch-site: same-origin
2026-02-04 18:43:48 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    sec-fetch-mode: no-cors
2026-02-04 18:43:48 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    sec-fetch-dest: image
2026-02-04 18:43:48 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    referer: http://defecto.localhost:8090/login?error
2026-02-04 18:43:48 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    accept-encoding: gzip, deflate, br, zstd
2026-02-04 18:43:48 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter -    cookie: TENANT_SESSION=5B8FECF5C4A52A6C0C474E7F7253ACFD
2026-02-04 18:43:48 [http-nio-8090-exec-7] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Despu√©s de validar dominio principal
2026-02-04 18:43:48 [http-nio-8090-exec-7] INFO  j.s.s.context.TenantFilter - üîç DEBUG - serverName: 'defecto.localhost', requestURI: '/login'
2026-02-04 18:43:48 [http-nio-8090-exec-7] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Punto CR√çTICO 1 - serverName: 'defecto.localhost', URI: '/login'
2026-02-04 18:43:48 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter - üìå TenantFilter - RUTA: /login, M√©todo: GET
2026-02-04 18:43:48 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter - üåê Server Name: defecto.localhost
2026-02-04 18:43:48 [http-nio-8090-exec-7] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio INICIO - serverName: 'defecto.localhost'
2026-02-04 18:43:48 [http-nio-8090-exec-7] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ¬øendsWith '.mibombay.com'? false
2026-02-04 18:43:48 [http-nio-8090-exec-7] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ‚ùå NO termina con .mibombay.com
2026-02-04 18:43:48 [http-nio-8090-exec-7] DEBUG j.s.s.context.TenantFilter - üîç Subdominio extra√≠do: null
2026-02-04 18:43:48 [http-nio-8090-exec-7] INFO  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio: 'null'
2026-02-04 18:43:48 [http-nio-8090-exec-7] WARN  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio es NULL! serverName: 'defecto.localhost'
2026-02-04 18:43:48 [http-nio-8090-exec-7] WARN  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - ¬øserverName.endsWith('.mibombay.com')? false
2026-02-04 18:43:48 [http-nio-8090-exec-7] INFO  j.s.s.controladores.InicioController - üîê GET /login - Subdominio: defecto.localhost
2026-02-04 18:43:48 [http-nio-8090-exec-7] DEBUG j.s.s.c.TenantContextCleanupFilter - ‚úÖ TenantContext limpiado - Hilo: 47, Request: /login, Empresa ID anterior: null
2026-02-04 18:45:39 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2026-02-04 18:45:39 [Thread-5] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-04 18:45:39 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-04 18:45:39 [Thread-5] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-04 18:45:39 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-04 18:45:39 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-04 18:45:39 [restartedMain] INFO  j.s.s.SistemadefacturacioneinventarioApplication - Starting SistemadefacturacioneinventarioApplication using Java 17.0.18 with PID 10116 (/home/josepino/Desktop/SistemaFacturaEInventario/sistemadefacturacioneinventario/target/classes started by josepino in /home/josepino/Desktop/SistemaFacturaEInventario/sistemadefacturacioneinventario)
2026-02-04 18:45:39 [restartedMain] DEBUG j.s.s.SistemadefacturacioneinventarioApplication - Running with Spring Boot v3.5.8, Spring v6.2.14
2026-02-04 18:45:39 [restartedMain] INFO  j.s.s.SistemadefacturacioneinventarioApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-04 18:45:39 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-04 18:45:39 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 14 JPA repository interfaces.
2026-02-04 18:45:39 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8090 (http)
2026-02-04 18:45:39 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-04 18:45:39 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-02-04 18:45:39 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-04 18:45:39 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 278 ms
2026-02-04 18:45:39 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-04 18:45:39 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-04 18:45:39 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-04 18:45:39 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2026-02-04 18:45:39 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3ea0d4c9
2026-02-04 18:45:39 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2026-02-04 18:45:39 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 8.0.45
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-04 18:45:40 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-04 18:45:40 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-04 18:45:40 [restartedMain] DEBUG o.h.s.internal.StatisticsInitiator - Statistics initialized [enabled=false]
2026-02-04 18:45:40 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - üîê Configurando BCryptPasswordEncoder para encriptaci√≥n de contrase√±as
2026-02-04 18:45:40 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2026-02-04 18:45:40 [restartedMain] INFO  j.s.s.config.WebConfig - ‚öôÔ∏è Configurando interceptores de Spring MVC
2026-02-04 18:45:40 [restartedMain] DEBUG j.s.s.config.WebConfig - Registrando CierreDiarioInterceptor
2026-02-04 18:45:40 [restartedMain] DEBUG j.s.s.config.WebConfig - CierreDiarioInterceptor configurado. Patrones incluidos: /**
2026-02-04 18:45:40 [restartedMain] DEBUG j.s.s.config.WebConfig - Patrones excluidos: /cierres/**, /login, /css/**, /js/**, /error
2026-02-04 18:45:40 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name usuarioServicio
2026-02-04 18:45:40 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - üõ°Ô∏è Configurando SecurityFilterChain para SUPERADMIN (Orden 1)
2026-02-04 18:45:40 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - ‚úÖ SecurityFilterChain SUPERADMIN configurado
2026-02-04 18:45:40 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure Or [Mvc [pattern='/superadmin/**']] with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-02-04 18:45:40 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - üõ°Ô∏è Configurando SecurityFilterChain - Iniciando configuraci√≥n de seguridad
2026-02-04 18:45:40 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - ‚úÖ SecurityFilterChain configurado exitosamente
2026-02-04 18:45:40 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - Configuraci√≥n de seguridad aplicada:
2026-02-04 18:45:40 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - P√°ginas p√∫blicas: /, /login, /acceso-denegado, /css/**, /js/**, /error
2026-02-04 18:45:40 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - Solo ADMIN: /compras/**, /proveedores/**
2026-02-04 18:45:40 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - ADMIN o DEV: /productos/**, /ingredientes/**, /recetas/**, /reportes/**, /cierres/**
2026-02-04 18:45:40 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - Login: /login, Logout: /logout
2026-02-04 18:45:40 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - P√°gina acceso denegado: /acceso-denegado
2026-02-04 18:45:40 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure Or [Mvc [pattern='/**']] with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, ConcurrentSessionFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-02-04 18:45:40 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-04 18:45:40 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8090 (http) with context path '/'
2026-02-04 18:45:40 [restartedMain] INFO  j.s.s.SistemadefacturacioneinventarioApplication - Started SistemadefacturacioneinventarioApplication in 1.232 seconds (process running for 134.457)
2026-02-04 18:45:40 [restartedMain] INFO  j.s.s.config.UsuarioInicial - üîß Iniciando carga de usuarios iniciales
2026-02-04 18:45:40 [restartedMain] DEBUG org.hibernate.SQL - select count(*) from empresa e1_0
2026-02-04 18:45:40 [restartedMain] DEBUG org.hibernate.SQL - select e1_0.id,e1_0.email_contacto,e1_0.estado,e1_0.fecha_creacion,e1_0.nombre,e1_0.plan,e1_0.subdominio,e1_0.telefono from empresa e1_0
2026-02-04 18:45:40 [restartedMain] DEBUG org.hibernate.SQL - select count(u1_0.id) from usuario u1_0 left join empresa e1_0 on e1_0.id=u1_0.empresa_id where e1_0.id=?
2026-02-04 18:45:40 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:BIGINT) <- [1]
2026-02-04 18:45:40 [restartedMain] DEBUG j.s.s.config.UsuarioInicial - Usuarios existentes en BD para empresa Sistema por Defecto: 3
2026-02-04 18:45:40 [restartedMain] INFO  j.s.s.config.UsuarioInicial - ‚úÖ Ya existen usuarios para empresa Sistema por Defecto. No se crean nuevos.
2026-02-04 18:45:40 [restartedMain] INFO  j.s.s.config.DataInitializer - üöÄ INICIANDO CARGA DE DATOS INICIALES DEL SISTEMA
2026-02-04 18:45:40 [restartedMain] DEBUG org.hibernate.SQL - select count(*) from empresa e1_0
2026-02-04 18:45:40 [restartedMain] DEBUG org.hibernate.SQL - select e1_0.id,e1_0.email_contacto,e1_0.estado,e1_0.fecha_creacion,e1_0.nombre,e1_0.plan,e1_0.subdominio,e1_0.telefono from empresa e1_0
2026-02-04 18:45:40 [restartedMain] INFO  j.s.s.config.DataInitializer - ‚úÖ Empresa existente encontrada: Sistema por Defecto (ID: 1)
2026-02-04 18:45:40 [restartedMain] DEBUG org.hibernate.SQL - select c1_0.id from cliente c1_0 left join empresa e1_0 on e1_0.id=c1_0.empresa_id where c1_0.nombre=? and e1_0.id=? limit ?
2026-02-04 18:45:40 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:VARCHAR) <- [Consumidor Final]
2026-02-04 18:45:40 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (2:BIGINT) <- [1]
2026-02-04 18:45:40 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (3:INTEGER) <- [1]
2026-02-04 18:45:40 [restartedMain] INFO  j.s.s.config.DataInitializer - ‚úÖ Cliente 'Consumidor Final' ya existe para empresa Sistema por Defecto
2026-02-04 18:45:40 [restartedMain] DEBUG org.hibernate.SQL - select count(u1_0.id) from usuario u1_0 left join empresa e1_0 on e1_0.id=u1_0.empresa_id where e1_0.id=?
2026-02-04 18:45:40 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:BIGINT) <- [1]
2026-02-04 18:45:40 [restartedMain] INFO  j.s.s.config.DataInitializer - ‚úÖ Ya existen 3 usuarios para empresa Sistema por Defecto. No se crean nuevos.
2026-02-04 18:45:40 [restartedMain] INFO  j.s.s.config.DataInitializer - üëë Verificando existencia de usuario SUPER_ADMIN
2026-02-04 18:45:40 [restartedMain] DEBUG org.hibernate.SQL - select u1_0.id from usuario u1_0 where u1_0.rol=? limit ?
2026-02-04 18:45:40 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:VARCHAR) <- [SUPER_ADMIN]
2026-02-04 18:45:40 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (2:INTEGER) <- [1]
2026-02-04 18:45:40 [restartedMain] INFO  j.s.s.config.DataInitializer - ‚úÖ Usuario SUPER_ADMIN ya existe en el sistema
2026-02-04 18:45:40 [restartedMain] INFO  j.s.s.config.DataInitializer - ‚úÖ CARGA DE DATOS INICIALES COMPLETADA EXITOSAMENTE
2026-02-04 18:45:40 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2026-02-04 18:47:30 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2026-02-04 18:47:30 [Thread-7] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-04 18:47:30 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-04 18:47:30 [Thread-7] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-04 18:47:30 [Thread-7] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2026-02-04 18:47:30 [Thread-7] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2026-02-04 18:47:30 [restartedMain] INFO  j.s.s.SistemadefacturacioneinventarioApplication - Starting SistemadefacturacioneinventarioApplication using Java 17.0.18 with PID 10116 (/home/josepino/Desktop/SistemaFacturaEInventario/sistemadefacturacioneinventario/target/classes started by josepino in /home/josepino/Desktop/SistemaFacturaEInventario/sistemadefacturacioneinventario)
2026-02-04 18:47:30 [restartedMain] DEBUG j.s.s.SistemadefacturacioneinventarioApplication - Running with Spring Boot v3.5.8, Spring v6.2.14
2026-02-04 18:47:30 [restartedMain] INFO  j.s.s.SistemadefacturacioneinventarioApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-04 18:47:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-04 18:47:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 21 ms. Found 14 JPA repository interfaces.
2026-02-04 18:47:30 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8090 (http)
2026-02-04 18:47:30 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-04 18:47:30 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-02-04 18:47:30 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-04 18:47:30 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 206 ms
2026-02-04 18:47:30 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-04 18:47:30 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-04 18:47:30 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-04 18:47:30 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2026-02-04 18:47:30 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection com.mysql.cj.jdbc.ConnectionImpl@125fcfad
2026-02-04 18:47:30 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2026-02-04 18:47:30 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 8.0.45
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-04 18:47:31 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-04 18:47:31 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-04 18:47:31 [restartedMain] DEBUG o.h.s.internal.StatisticsInitiator - Statistics initialized [enabled=false]
2026-02-04 18:47:31 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - üîê Configurando BCryptPasswordEncoder para encriptaci√≥n de contrase√±as
2026-02-04 18:47:31 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2026-02-04 18:47:31 [restartedMain] INFO  j.s.s.config.WebConfig - ‚öôÔ∏è Configurando interceptores de Spring MVC
2026-02-04 18:47:31 [restartedMain] DEBUG j.s.s.config.WebConfig - Registrando CierreDiarioInterceptor
2026-02-04 18:47:31 [restartedMain] DEBUG j.s.s.config.WebConfig - CierreDiarioInterceptor configurado. Patrones incluidos: /**
2026-02-04 18:47:31 [restartedMain] DEBUG j.s.s.config.WebConfig - Patrones excluidos: /cierres/**, /login, /css/**, /js/**, /error
2026-02-04 18:47:31 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name usuarioServicio
2026-02-04 18:47:31 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - üõ°Ô∏è Configurando SecurityFilterChain para SUPERADMIN (Orden 1)
2026-02-04 18:47:31 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - ‚úÖ SecurityFilterChain SUPERADMIN configurado
2026-02-04 18:47:31 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure Or [Mvc [pattern='/superadmin/**']] with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-02-04 18:47:31 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - üõ°Ô∏è Configurando SecurityFilterChain - Iniciando configuraci√≥n de seguridad
2026-02-04 18:47:31 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - ‚úÖ SecurityFilterChain configurado exitosamente
2026-02-04 18:47:31 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - Configuraci√≥n de seguridad aplicada:
2026-02-04 18:47:31 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - P√°ginas p√∫blicas: /, /login, /acceso-denegado, /css/**, /js/**, /error
2026-02-04 18:47:31 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - Solo ADMIN: /compras/**, /proveedores/**
2026-02-04 18:47:31 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - ADMIN o DEV: /productos/**, /ingredientes/**, /recetas/**, /reportes/**, /cierres/**
2026-02-04 18:47:31 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - Login: /login, Logout: /logout
2026-02-04 18:47:31 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - P√°gina acceso denegado: /acceso-denegado
2026-02-04 18:47:31 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure Or [Mvc [pattern='/**']] with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, ConcurrentSessionFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-02-04 18:47:31 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-04 18:47:31 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8090 (http) with context path '/'
2026-02-04 18:47:31 [restartedMain] INFO  j.s.s.SistemadefacturacioneinventarioApplication - Started SistemadefacturacioneinventarioApplication in 0.848 seconds (process running for 245.173)
2026-02-04 18:47:31 [restartedMain] INFO  j.s.s.config.DataInitializer - üöÄ INICIANDO CARGA DE DATOS INICIALES DEL SISTEMA
2026-02-04 18:47:31 [restartedMain] DEBUG org.hibernate.SQL - select count(*) from empresa e1_0
2026-02-04 18:47:31 [restartedMain] DEBUG org.hibernate.SQL - select e1_0.id,e1_0.email_contacto,e1_0.estado,e1_0.fecha_creacion,e1_0.nombre,e1_0.plan,e1_0.subdominio,e1_0.telefono from empresa e1_0
2026-02-04 18:47:31 [restartedMain] INFO  j.s.s.config.DataInitializer - ‚úÖ Empresa existente encontrada: Sistema por Defecto (ID: 1)
2026-02-04 18:47:31 [restartedMain] DEBUG org.hibernate.SQL - select c1_0.id from cliente c1_0 left join empresa e1_0 on e1_0.id=c1_0.empresa_id where c1_0.nombre=? and e1_0.id=? limit ?
2026-02-04 18:47:31 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:VARCHAR) <- [Consumidor Final]
2026-02-04 18:47:31 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (2:BIGINT) <- [1]
2026-02-04 18:47:31 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (3:INTEGER) <- [1]
2026-02-04 18:47:31 [restartedMain] INFO  j.s.s.config.DataInitializer - ‚úÖ Cliente 'Consumidor Final' ya existe para empresa Sistema por Defecto
2026-02-04 18:47:31 [restartedMain] DEBUG org.hibernate.SQL - select count(u1_0.id) from usuario u1_0 left join empresa e1_0 on e1_0.id=u1_0.empresa_id where e1_0.id=?
2026-02-04 18:47:31 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:BIGINT) <- [1]
2026-02-04 18:47:31 [restartedMain] INFO  j.s.s.config.DataInitializer - ‚úÖ Ya existen 3 usuarios para empresa Sistema por Defecto. No se crean nuevos.
2026-02-04 18:47:31 [restartedMain] INFO  j.s.s.config.DataInitializer - üëë Verificando existencia de usuario SUPER_ADMIN
2026-02-04 18:47:31 [restartedMain] DEBUG org.hibernate.SQL - select u1_0.id from usuario u1_0 where u1_0.rol=? limit ?
2026-02-04 18:47:31 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:VARCHAR) <- [SUPER_ADMIN]
2026-02-04 18:47:31 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (2:INTEGER) <- [1]
2026-02-04 18:47:31 [restartedMain] INFO  j.s.s.config.DataInitializer - ‚úÖ Usuario SUPER_ADMIN ya existe en el sistema
2026-02-04 18:47:31 [restartedMain] INFO  j.s.s.config.DataInitializer - ‚úÖ CARGA DE DATOS INICIALES COMPLETADA EXITOSAMENTE
2026-02-04 18:47:31 [restartedMain] INFO  j.s.s.config.UsuarioInicial - üîß Iniciando carga de usuarios iniciales
2026-02-04 18:47:31 [restartedMain] DEBUG org.hibernate.SQL - select count(*) from empresa e1_0
2026-02-04 18:47:31 [restartedMain] DEBUG org.hibernate.SQL - select e1_0.id,e1_0.email_contacto,e1_0.estado,e1_0.fecha_creacion,e1_0.nombre,e1_0.plan,e1_0.subdominio,e1_0.telefono from empresa e1_0
2026-02-04 18:47:31 [restartedMain] DEBUG org.hibernate.SQL - select count(u1_0.id) from usuario u1_0 left join empresa e1_0 on e1_0.id=u1_0.empresa_id where e1_0.id=?
2026-02-04 18:47:31 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:BIGINT) <- [1]
2026-02-04 18:47:31 [restartedMain] DEBUG j.s.s.config.UsuarioInicial - Usuarios existentes en BD para empresa Sistema por Defecto: 3
2026-02-04 18:47:31 [restartedMain] INFO  j.s.s.config.UsuarioInicial - ‚úÖ Ya existen usuarios para empresa Sistema por Defecto. No se crean nuevos.
2026-02-04 18:47:31 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2026-02-04 18:48:43 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2026-02-04 18:48:43 [Thread-11] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-04 18:48:43 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-04 18:48:43 [Thread-11] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-04 18:48:43 [Thread-11] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2026-02-04 18:48:43 [Thread-11] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
2026-02-04 18:48:43 [restartedMain] INFO  j.s.s.SistemadefacturacioneinventarioApplication - Starting SistemadefacturacioneinventarioApplication using Java 17.0.18 with PID 10116 (/home/josepino/Desktop/SistemaFacturaEInventario/sistemadefacturacioneinventario/target/classes started by josepino in /home/josepino/Desktop/SistemaFacturaEInventario/sistemadefacturacioneinventario)
2026-02-04 18:48:43 [restartedMain] DEBUG j.s.s.SistemadefacturacioneinventarioApplication - Running with Spring Boot v3.5.8, Spring v6.2.14
2026-02-04 18:48:43 [restartedMain] INFO  j.s.s.SistemadefacturacioneinventarioApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-04 18:48:43 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-04 18:48:43 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 15 ms. Found 14 JPA repository interfaces.
2026-02-04 18:48:43 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8090 (http)
2026-02-04 18:48:43 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-04 18:48:43 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-02-04 18:48:43 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-04 18:48:43 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 186 ms
2026-02-04 18:48:43 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-04 18:48:43 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-04 18:48:43 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-04 18:48:43 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Starting...
2026-02-04 18:48:43 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-4 - Added connection com.mysql.cj.jdbc.ConnectionImpl@20a1e174
2026-02-04 18:48:43 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Start completed.
2026-02-04 18:48:43 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-4)']
	Database driver: undefined/unknown
	Database version: 8.0.45
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-04 18:48:43 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-04 18:48:43 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-04 18:48:43 [restartedMain] DEBUG o.h.s.internal.StatisticsInitiator - Statistics initialized [enabled=false]
2026-02-04 18:48:43 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - üîê Configurando BCryptPasswordEncoder para encriptaci√≥n de contrase√±as
2026-02-04 18:48:44 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2026-02-04 18:48:44 [restartedMain] INFO  j.s.s.config.WebConfig - ‚öôÔ∏è Configurando interceptores de Spring MVC
2026-02-04 18:48:44 [restartedMain] DEBUG j.s.s.config.WebConfig - Registrando CierreDiarioInterceptor
2026-02-04 18:48:44 [restartedMain] DEBUG j.s.s.config.WebConfig - CierreDiarioInterceptor configurado. Patrones incluidos: /**
2026-02-04 18:48:44 [restartedMain] DEBUG j.s.s.config.WebConfig - Patrones excluidos: /cierres/**, /login, /css/**, /js/**, /error
2026-02-04 18:48:44 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name usuarioServicio
2026-02-04 18:48:44 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - üõ°Ô∏è Configurando SecurityFilterChain para SUPERADMIN (Orden 1)
2026-02-04 18:48:44 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - ‚úÖ SecurityFilterChain SUPERADMIN configurado
2026-02-04 18:48:44 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure Or [Mvc [pattern='/superadmin/**']] with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-02-04 18:48:44 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - üõ°Ô∏è Configurando SecurityFilterChain - Iniciando configuraci√≥n de seguridad
2026-02-04 18:48:44 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - ‚úÖ SecurityFilterChain configurado exitosamente
2026-02-04 18:48:44 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - Configuraci√≥n de seguridad aplicada:
2026-02-04 18:48:44 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - P√°ginas p√∫blicas: /, /login, /acceso-denegado, /css/**, /js/**, /error
2026-02-04 18:48:44 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - Solo ADMIN: /compras/**, /proveedores/**
2026-02-04 18:48:44 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - ADMIN o DEV: /productos/**, /ingredientes/**, /recetas/**, /reportes/**, /cierres/**
2026-02-04 18:48:44 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - Login: /login, Logout: /logout
2026-02-04 18:48:44 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - P√°gina acceso denegado: /acceso-denegado
2026-02-04 18:48:44 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure Or [Mvc [pattern='/**']] with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, ConcurrentSessionFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-02-04 18:48:44 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-04 18:48:44 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8090 (http) with context path '/'
2026-02-04 18:48:44 [restartedMain] INFO  j.s.s.SistemadefacturacioneinventarioApplication - Started SistemadefacturacioneinventarioApplication in 0.947 seconds (process running for 317.845)
2026-02-04 18:48:44 [restartedMain] INFO  j.s.s.config.UsuarioInicial - üîß Iniciando carga de usuarios iniciales
2026-02-04 18:48:44 [restartedMain] DEBUG org.hibernate.SQL - select count(*) from empresa e1_0
2026-02-04 18:48:44 [restartedMain] DEBUG org.hibernate.SQL - select e1_0.id,e1_0.email_contacto,e1_0.estado,e1_0.fecha_creacion,e1_0.nombre,e1_0.plan,e1_0.subdominio,e1_0.telefono from empresa e1_0
2026-02-04 18:48:44 [restartedMain] DEBUG org.hibernate.SQL - select count(u1_0.id) from usuario u1_0 left join empresa e1_0 on e1_0.id=u1_0.empresa_id where e1_0.id=?
2026-02-04 18:48:44 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:BIGINT) <- [1]
2026-02-04 18:48:44 [restartedMain] DEBUG j.s.s.config.UsuarioInicial - Usuarios existentes en BD para empresa Sistema por Defecto: 3
2026-02-04 18:48:44 [restartedMain] INFO  j.s.s.config.UsuarioInicial - ‚úÖ Ya existen usuarios para empresa Sistema por Defecto. No se crean nuevos.
2026-02-04 18:48:44 [restartedMain] INFO  j.s.s.config.DataInitializer - üöÄ INICIANDO CARGA DE DATOS INICIALES DEL SISTEMA
2026-02-04 18:48:44 [restartedMain] DEBUG org.hibernate.SQL - select count(*) from empresa e1_0
2026-02-04 18:48:44 [restartedMain] DEBUG org.hibernate.SQL - select e1_0.id,e1_0.email_contacto,e1_0.estado,e1_0.fecha_creacion,e1_0.nombre,e1_0.plan,e1_0.subdominio,e1_0.telefono from empresa e1_0
2026-02-04 18:48:44 [restartedMain] INFO  j.s.s.config.DataInitializer - ‚úÖ Empresa existente encontrada: Sistema por Defecto (ID: 1)
2026-02-04 18:48:44 [restartedMain] DEBUG org.hibernate.SQL - select c1_0.id from cliente c1_0 left join empresa e1_0 on e1_0.id=c1_0.empresa_id where c1_0.nombre=? and e1_0.id=? limit ?
2026-02-04 18:48:44 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:VARCHAR) <- [Consumidor Final]
2026-02-04 18:48:44 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (2:BIGINT) <- [1]
2026-02-04 18:48:44 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (3:INTEGER) <- [1]
2026-02-04 18:48:44 [restartedMain] INFO  j.s.s.config.DataInitializer - ‚úÖ Cliente 'Consumidor Final' ya existe para empresa Sistema por Defecto
2026-02-04 18:48:44 [restartedMain] DEBUG org.hibernate.SQL - select count(u1_0.id) from usuario u1_0 left join empresa e1_0 on e1_0.id=u1_0.empresa_id where e1_0.id=?
2026-02-04 18:48:44 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:BIGINT) <- [1]
2026-02-04 18:48:44 [restartedMain] INFO  j.s.s.config.DataInitializer - ‚úÖ Ya existen 3 usuarios para empresa Sistema por Defecto. No se crean nuevos.
2026-02-04 18:48:44 [restartedMain] INFO  j.s.s.config.DataInitializer - üëë Verificando existencia de usuario SUPER_ADMIN
2026-02-04 18:48:44 [restartedMain] DEBUG org.hibernate.SQL - select u1_0.id from usuario u1_0 where u1_0.rol=? limit ?
2026-02-04 18:48:44 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:VARCHAR) <- [SUPER_ADMIN]
2026-02-04 18:48:44 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (2:INTEGER) <- [1]
2026-02-04 18:48:44 [restartedMain] INFO  j.s.s.config.DataInitializer - ‚úÖ Usuario SUPER_ADMIN ya existe en el sistema
2026-02-04 18:48:44 [restartedMain] INFO  j.s.s.config.DataInitializer - ‚úÖ CARGA DE DATOS INICIALES COMPLETADA EXITOSAMENTE
2026-02-04 18:48:44 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2026-02-04 18:48:45 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2026-02-04 18:48:45 [Thread-15] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-04 18:48:45 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-04 18:48:45 [Thread-15] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-04 18:48:45 [Thread-15] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown initiated...
2026-02-04 18:48:45 [Thread-15] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown completed.
2026-02-04 18:48:45 [restartedMain] INFO  j.s.s.SistemadefacturacioneinventarioApplication - Starting SistemadefacturacioneinventarioApplication using Java 17.0.18 with PID 10116 (/home/josepino/Desktop/SistemaFacturaEInventario/sistemadefacturacioneinventario/target/classes started by josepino in /home/josepino/Desktop/SistemaFacturaEInventario/sistemadefacturacioneinventario)
2026-02-04 18:48:45 [restartedMain] DEBUG j.s.s.SistemadefacturacioneinventarioApplication - Running with Spring Boot v3.5.8, Spring v6.2.14
2026-02-04 18:48:45 [restartedMain] INFO  j.s.s.SistemadefacturacioneinventarioApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-04 18:48:45 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-04 18:48:45 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 18 ms. Found 14 JPA repository interfaces.
2026-02-04 18:48:45 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8090 (http)
2026-02-04 18:48:45 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-04 18:48:45 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-02-04 18:48:45 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-04 18:48:45 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 181 ms
2026-02-04 18:48:45 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-04 18:48:45 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-04 18:48:45 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-04 18:48:45 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Starting...
2026-02-04 18:48:45 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-5 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2f4145d6
2026-02-04 18:48:45 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Start completed.
2026-02-04 18:48:45 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-5)']
	Database driver: undefined/unknown
	Database version: 8.0.45
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-04 18:48:45 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-04 18:48:46 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-04 18:48:46 [restartedMain] DEBUG o.h.s.internal.StatisticsInitiator - Statistics initialized [enabled=false]
2026-02-04 18:48:46 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - üîê Configurando BCryptPasswordEncoder para encriptaci√≥n de contrase√±as
2026-02-04 18:48:46 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2026-02-04 18:48:46 [restartedMain] INFO  j.s.s.config.WebConfig - ‚öôÔ∏è Configurando interceptores de Spring MVC
2026-02-04 18:48:46 [restartedMain] DEBUG j.s.s.config.WebConfig - Registrando CierreDiarioInterceptor
2026-02-04 18:48:46 [restartedMain] DEBUG j.s.s.config.WebConfig - CierreDiarioInterceptor configurado. Patrones incluidos: /**
2026-02-04 18:48:46 [restartedMain] DEBUG j.s.s.config.WebConfig - Patrones excluidos: /cierres/**, /login, /css/**, /js/**, /error
2026-02-04 18:48:46 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name usuarioServicio
2026-02-04 18:48:46 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - üõ°Ô∏è Configurando SecurityFilterChain para SUPERADMIN (Orden 1)
2026-02-04 18:48:46 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - ‚úÖ SecurityFilterChain SUPERADMIN configurado
2026-02-04 18:48:46 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure Or [Mvc [pattern='/superadmin/**']] with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-02-04 18:48:46 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - üõ°Ô∏è Configurando SecurityFilterChain - Iniciando configuraci√≥n de seguridad
2026-02-04 18:48:46 [restartedMain] INFO  j.s.s.config.SpringSecurityConfig - ‚úÖ SecurityFilterChain configurado exitosamente
2026-02-04 18:48:46 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - Configuraci√≥n de seguridad aplicada:
2026-02-04 18:48:46 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - P√°ginas p√∫blicas: /, /login, /acceso-denegado, /css/**, /js/**, /error
2026-02-04 18:48:46 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - Solo ADMIN: /compras/**, /proveedores/**
2026-02-04 18:48:46 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - ADMIN o DEV: /productos/**, /ingredientes/**, /recetas/**, /reportes/**, /cierres/**
2026-02-04 18:48:46 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - Login: /login, Logout: /logout
2026-02-04 18:48:46 [restartedMain] DEBUG j.s.s.config.SpringSecurityConfig - - P√°gina acceso denegado: /acceso-denegado
2026-02-04 18:48:46 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure Or [Mvc [pattern='/**']] with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CsrfFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, ConcurrentSessionFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-02-04 18:48:46 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-04 18:48:46 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8090 (http) with context path '/'
2026-02-04 18:48:46 [restartedMain] INFO  j.s.s.SistemadefacturacioneinventarioApplication - Started SistemadefacturacioneinventarioApplication in 0.755 seconds (process running for 320.053)
2026-02-04 18:48:46 [restartedMain] INFO  j.s.s.config.DataInitializer - üöÄ INICIANDO CARGA DE DATOS INICIALES DEL SISTEMA
2026-02-04 18:48:46 [restartedMain] DEBUG org.hibernate.SQL - select count(*) from empresa e1_0
2026-02-04 18:48:46 [restartedMain] DEBUG org.hibernate.SQL - select e1_0.id,e1_0.email_contacto,e1_0.estado,e1_0.fecha_creacion,e1_0.nombre,e1_0.plan,e1_0.subdominio,e1_0.telefono from empresa e1_0
2026-02-04 18:48:46 [restartedMain] INFO  j.s.s.config.DataInitializer - ‚úÖ Empresa existente encontrada: Sistema por Defecto (ID: 1)
2026-02-04 18:48:46 [restartedMain] DEBUG org.hibernate.SQL - select c1_0.id from cliente c1_0 left join empresa e1_0 on e1_0.id=c1_0.empresa_id where c1_0.nombre=? and e1_0.id=? limit ?
2026-02-04 18:48:46 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:VARCHAR) <- [Consumidor Final]
2026-02-04 18:48:46 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (2:BIGINT) <- [1]
2026-02-04 18:48:46 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (3:INTEGER) <- [1]
2026-02-04 18:48:46 [restartedMain] INFO  j.s.s.config.DataInitializer - ‚úÖ Cliente 'Consumidor Final' ya existe para empresa Sistema por Defecto
2026-02-04 18:48:46 [restartedMain] DEBUG org.hibernate.SQL - select count(u1_0.id) from usuario u1_0 left join empresa e1_0 on e1_0.id=u1_0.empresa_id where e1_0.id=?
2026-02-04 18:48:46 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:BIGINT) <- [1]
2026-02-04 18:48:46 [restartedMain] INFO  j.s.s.config.DataInitializer - ‚úÖ Ya existen 3 usuarios para empresa Sistema por Defecto. No se crean nuevos.
2026-02-04 18:48:46 [restartedMain] INFO  j.s.s.config.DataInitializer - üëë Verificando existencia de usuario SUPER_ADMIN
2026-02-04 18:48:46 [restartedMain] DEBUG org.hibernate.SQL - select u1_0.id from usuario u1_0 where u1_0.rol=? limit ?
2026-02-04 18:48:46 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:VARCHAR) <- [SUPER_ADMIN]
2026-02-04 18:48:46 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (2:INTEGER) <- [1]
2026-02-04 18:48:46 [restartedMain] INFO  j.s.s.config.DataInitializer - ‚úÖ Usuario SUPER_ADMIN ya existe en el sistema
2026-02-04 18:48:46 [restartedMain] INFO  j.s.s.config.DataInitializer - ‚úÖ CARGA DE DATOS INICIALES COMPLETADA EXITOSAMENTE
2026-02-04 18:48:46 [restartedMain] INFO  j.s.s.config.UsuarioInicial - üîß Iniciando carga de usuarios iniciales
2026-02-04 18:48:46 [restartedMain] DEBUG org.hibernate.SQL - select count(*) from empresa e1_0
2026-02-04 18:48:46 [restartedMain] DEBUG org.hibernate.SQL - select e1_0.id,e1_0.email_contacto,e1_0.estado,e1_0.fecha_creacion,e1_0.nombre,e1_0.plan,e1_0.subdominio,e1_0.telefono from empresa e1_0
2026-02-04 18:48:46 [restartedMain] DEBUG org.hibernate.SQL - select count(u1_0.id) from usuario u1_0 left join empresa e1_0 on e1_0.id=u1_0.empresa_id where e1_0.id=?
2026-02-04 18:48:46 [restartedMain] TRACE org.hibernate.orm.jdbc.bind - binding parameter (1:BIGINT) <- [1]
2026-02-04 18:48:46 [restartedMain] DEBUG j.s.s.config.UsuarioInicial - Usuarios existentes en BD para empresa Sistema por Defecto: 3
2026-02-04 18:48:46 [restartedMain] INFO  j.s.s.config.UsuarioInicial - ‚úÖ Ya existen usuarios para empresa Sistema por Defecto. No se crean nuevos.
2026-02-04 18:48:46 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2026-02-04 18:48:54 [http-nio-8090-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-04 18:48:54 [http-nio-8090-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-04 18:48:54 [http-nio-8090-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-02-04 18:48:54 [http-nio-8090-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2026-02-04 18:48:54 [http-nio-8090-exec-1] DEBUG j.s.s.servicios.UsuarioServicio - Autenticando usuario: admin para la empresa ID: null
2026-02-04 18:48:54 [http-nio-8090-exec-1] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio INICIO - serverName: 'defecto.localhost'
2026-02-04 18:48:54 [http-nio-8090-exec-1] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ¬øendsWith '.mibombay.com'? false
2026-02-04 18:48:54 [http-nio-8090-exec-1] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ‚ùå NO termina con .mibombay.com
2026-02-04 18:48:54 [http-nio-8090-exec-1] INFO  j.s.s.servicios.UsuarioServicio - üîê Login - Usuario: admin | Subdominio: null
2026-02-04 18:48:54 [http-nio-8090-exec-1] DEBUG org.hibernate.SQL - select e1_0.id,e1_0.email_contacto,e1_0.estado,e1_0.fecha_creacion,e1_0.nombre,e1_0.plan,e1_0.subdominio,e1_0.telefono from empresa e1_0 where e1_0.subdominio is null
2026-02-04 18:48:54 [http-nio-8090-exec-1] ERROR j.s.s.servicios.UsuarioServicio - Empresa no encontrada para subdominio: null
2026-02-04 18:48:54 [http-nio-8090-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'admin'
2026-02-04 18:48:54 [http-nio-8090-exec-1] DEBUG o.s.s.authentication.ProviderManager - Authentication failed with provider DaoAuthenticationProvider since Bad credentials
2026-02-04 18:48:54 [http-nio-8090-exec-1] DEBUG o.s.s.authentication.ProviderManager - Denying authentication since all attempted providers failed
2026-02-04 18:48:54 [http-nio-8090-exec-1] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to /login?error
2026-02-04 18:48:54 [http-nio-8090-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login?error
2026-02-04 18:48:54 [http-nio-8090-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-02-04 18:48:54 [http-nio-8090-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login?error
2026-02-04 18:48:54 [http-nio-8090-exec-2] INFO  j.s.s.context.TenantFilter - üîç DEBUG TenantFilter - serverName: defecto.localhost, Host header: defecto.localhost:8090
2026-02-04 18:48:54 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    host: defecto.localhost:8090
2026-02-04 18:48:54 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    connection: keep-alive
2026-02-04 18:48:54 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    cache-control: max-age=0
2026-02-04 18:48:54 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    upgrade-insecure-requests: 1
2026-02-04 18:48:54 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    user-agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-04 18:48:54 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8
2026-02-04 18:48:54 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    sec-gpc: 1
2026-02-04 18:48:54 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    accept-language: en-US,en;q=0.8
2026-02-04 18:48:54 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    sec-fetch-site: same-origin
2026-02-04 18:48:54 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    sec-fetch-mode: navigate
2026-02-04 18:48:54 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    sec-fetch-user: ?1
2026-02-04 18:48:54 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    sec-fetch-dest: document
2026-02-04 18:48:54 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua: "Not(A:Brand";v="8", "Chromium";v="144", "Brave";v="144"
2026-02-04 18:48:54 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-mobile: ?0
2026-02-04 18:48:54 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-platform: "Linux"
2026-02-04 18:48:54 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    referer: http://defecto.localhost:8090/login?error
2026-02-04 18:48:54 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    accept-encoding: gzip, deflate, br, zstd
2026-02-04 18:48:54 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter -    cookie: TENANT_SESSION=5B8FECF5C4A52A6C0C474E7F7253ACFD
2026-02-04 18:48:54 [http-nio-8090-exec-2] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Despu√©s de validar dominio principal
2026-02-04 18:48:54 [http-nio-8090-exec-2] INFO  j.s.s.context.TenantFilter - üîç DEBUG - serverName: 'defecto.localhost', requestURI: '/login'
2026-02-04 18:48:54 [http-nio-8090-exec-2] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Punto CR√çTICO 1 - serverName: 'defecto.localhost', URI: '/login'
2026-02-04 18:48:54 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter - üìå TenantFilter - RUTA: /login, M√©todo: GET
2026-02-04 18:48:54 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter - üåê Server Name: defecto.localhost
2026-02-04 18:48:54 [http-nio-8090-exec-2] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio INICIO - serverName: 'defecto.localhost'
2026-02-04 18:48:54 [http-nio-8090-exec-2] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ¬øendsWith '.mibombay.com'? false
2026-02-04 18:48:54 [http-nio-8090-exec-2] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ‚ùå NO termina con .mibombay.com
2026-02-04 18:48:54 [http-nio-8090-exec-2] DEBUG j.s.s.context.TenantFilter - üîç Subdominio extra√≠do: null
2026-02-04 18:48:54 [http-nio-8090-exec-2] INFO  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio: 'null'
2026-02-04 18:48:54 [http-nio-8090-exec-2] WARN  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio es NULL! serverName: 'defecto.localhost'
2026-02-04 18:48:54 [http-nio-8090-exec-2] WARN  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - ¬øserverName.endsWith('.mibombay.com')? false
2026-02-04 18:48:54 [http-nio-8090-exec-2] INFO  j.s.s.controladores.InicioController - üîê GET /login - Subdominio: defecto.localhost
2026-02-04 18:48:54 [http-nio-8090-exec-2] DEBUG j.s.s.c.TenantContextCleanupFilter - ‚úÖ TenantContext limpiado - Hilo: 139, Request: /login, Empresa ID anterior: null
2026-02-04 18:48:54 [http-nio-8090-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2026-02-04 18:48:54 [http-nio-8090-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-02-04 18:48:54 [http-nio-8090-exec-3] DEBUG o.s.s.web.DefaultRedirectStrategy - Redirecting to http://defecto.localhost:8090/login
2026-02-04 18:48:54 [http-nio-8090-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /login
2026-02-04 18:48:54 [http-nio-8090-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2026-02-04 18:48:54 [http-nio-8090-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /login
2026-02-04 18:48:54 [http-nio-8090-exec-4] INFO  j.s.s.context.TenantFilter - üîç DEBUG TenantFilter - serverName: defecto.localhost, Host header: defecto.localhost:8090
2026-02-04 18:48:54 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    host: defecto.localhost:8090
2026-02-04 18:48:54 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    connection: keep-alive
2026-02-04 18:48:54 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-platform: "Linux"
2026-02-04 18:48:54 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    user-agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-04 18:48:54 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua: "Not(A:Brand";v="8", "Chromium";v="144", "Brave";v="144"
2026-02-04 18:48:54 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    sec-ch-ua-mobile: ?0
2026-02-04 18:48:54 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    accept: image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8
2026-02-04 18:48:54 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    sec-gpc: 1
2026-02-04 18:48:54 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    accept-language: en-US,en;q=0.8
2026-02-04 18:48:54 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    sec-fetch-site: same-origin
2026-02-04 18:48:54 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    sec-fetch-mode: no-cors
2026-02-04 18:48:54 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    sec-fetch-dest: image
2026-02-04 18:48:54 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    referer: http://defecto.localhost:8090/login?error
2026-02-04 18:48:54 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    accept-encoding: gzip, deflate, br, zstd
2026-02-04 18:48:54 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter -    cookie: TENANT_SESSION=5B8FECF5C4A52A6C0C474E7F7253ACFD
2026-02-04 18:48:54 [http-nio-8090-exec-4] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Despu√©s de validar dominio principal
2026-02-04 18:48:54 [http-nio-8090-exec-4] INFO  j.s.s.context.TenantFilter - üîç DEBUG - serverName: 'defecto.localhost', requestURI: '/login'
2026-02-04 18:48:54 [http-nio-8090-exec-4] INFO  j.s.s.context.TenantFilter - üîç DEBUG - Punto CR√çTICO 1 - serverName: 'defecto.localhost', URI: '/login'
2026-02-04 18:48:54 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter - üìå TenantFilter - RUTA: /login, M√©todo: GET
2026-02-04 18:48:54 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter - üåê Server Name: defecto.localhost
2026-02-04 18:48:54 [http-nio-8090-exec-4] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio INICIO - serverName: 'defecto.localhost'
2026-02-04 18:48:54 [http-nio-8090-exec-4] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ¬øendsWith '.mibombay.com'? false
2026-02-04 18:48:54 [http-nio-8090-exec-4] INFO  j.s.s.context.TenantFilter - üîç DEBUG extraerSubdominio: ‚ùå NO termina con .mibombay.com
2026-02-04 18:48:54 [http-nio-8090-exec-4] DEBUG j.s.s.context.TenantFilter - üîç Subdominio extra√≠do: null
2026-02-04 18:48:54 [http-nio-8090-exec-4] INFO  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio: 'null'
2026-02-04 18:48:54 [http-nio-8090-exec-4] WARN  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - Subdominio es NULL! serverName: 'defecto.localhost'
2026-02-04 18:48:54 [http-nio-8090-exec-4] WARN  j.s.s.context.TenantFilter - üîç DEBUG CR√çTICO - ¬øserverName.endsWith('.mibombay.com')? false
2026-02-04 18:48:54 [http-nio-8090-exec-4] INFO  j.s.s.controladores.InicioController - üîê GET /login - Subdominio: defecto.localhost
2026-02-04 18:48:54 [http-nio-8090-exec-4] DEBUG j.s.s.c.TenantContextCleanupFilter - ‚úÖ TenantContext limpiado - Hilo: 141, Request: /login, Empresa ID anterior: null
2026-02-04 18:49:00 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-04 18:49:00 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-04 18:49:00 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-04 18:49:00 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown initiated...
2026-02-04 18:49:00 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown completed.
